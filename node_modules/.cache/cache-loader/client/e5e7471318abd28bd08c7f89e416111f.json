{"remainingRequest":"/home/diane/Documents/MDT/Portfolio/node_modules/babel-loader/lib/index.js??ref--2-1!/home/diane/Documents/MDT/Portfolio/.nuxt/client.js","dependencies":[{"path":"/home/diane/Documents/MDT/Portfolio/.nuxt/client.js","mtime":1697967626238},{"path":"/home/diane/Documents/MDT/Portfolio/node_modules/cache-loader/dist/cjs.js","mtime":1696602851329},{"path":"/home/diane/Documents/MDT/Portfolio/node_modules/babel-loader/lib/index.js","mtime":1696602851385}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCBfdHlwZW9mIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmFzc2lnbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuZmluYWxseS5qcyI7CmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvWyJAQGl0ZXJhdG9yIl07IGlmICghaXQpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXQucmV0dXJuICE9IG51bGwpIGl0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7IH0gfSB9OyB9CmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBmZXRjaCBmcm9tICd1bmZldGNoJzsKaW1wb3J0IG1pZGRsZXdhcmUgZnJvbSAnLi9taWRkbGV3YXJlLmpzJzsKaW1wb3J0IHsgYXBwbHlBc3luY0RhdGEsIHByb21pc2lmeSwgbWlkZGxld2FyZVNlcmllcywgc2FuaXRpemVDb21wb25lbnQsIHJlc29sdmVSb3V0ZUNvbXBvbmVudHMsIGdldE1hdGNoZWRDb21wb25lbnRzLCBnZXRNYXRjaGVkQ29tcG9uZW50c0luc3RhbmNlcywgZmxhdE1hcENvbXBvbmVudHMsIHNldENvbnRleHQsIGdldExvY2F0aW9uLCBjb21waWxlLCBnZXRRdWVyeURpZmYsIGdsb2JhbEhhbmRsZUVycm9yLCBpc1NhbWVQYXRoLCB1cmxKb2luIH0gZnJvbSAnLi91dGlscy5qcyc7CmltcG9ydCB7IGNyZWF0ZUFwcCwgTnV4dEVycm9yIH0gZnJvbSAnLi9pbmRleC5qcyc7CmltcG9ydCBmZXRjaE1peGluIGZyb20gJy4vbWl4aW5zL2ZldGNoLmNsaWVudCc7CmltcG9ydCBOdXh0TGluayBmcm9tICcuL2NvbXBvbmVudHMvbnV4dC1saW5rLmNsaWVudC5qcyc7IC8vIHNob3VsZCBiZSBpbmNsdWRlZCBhZnRlciAuL2luZGV4LmpzCmltcG9ydCB7IGluc3RhbGxKc29ucCB9IGZyb20gJy4vanNvbnAnOwppbnN0YWxsSnNvbnAoKTsKCi8vIEZldGNoIG1peGluCmlmICghVnVlLl9fbnV4dF9fZmV0Y2hfX21peGluX18pIHsKICBWdWUubWl4aW4oZmV0Y2hNaXhpbik7CiAgVnVlLl9fbnV4dF9fZmV0Y2hfX21peGluX18gPSB0cnVlOwp9CgovLyBDb21wb25lbnQ6IDxOdXh0TGluaz4KVnVlLmNvbXBvbmVudChOdXh0TGluay5uYW1lLCBOdXh0TGluayk7ClZ1ZS5jb21wb25lbnQoJ05MaW5rJywgTnV4dExpbmspOwppZiAoIWdsb2JhbC5mZXRjaCkgewogIGdsb2JhbC5mZXRjaCA9IGZldGNoOwp9CgovLyBHbG9iYWwgc2hhcmVkIHJlZmVyZW5jZXMKdmFyIF9sYXN0UGF0aHMgPSBbXTsKdmFyIGFwcDsKdmFyIHJvdXRlcjsKCi8vIFRyeSB0byByZWh5ZHJhdGUgU1NSIGRhdGEgZnJvbSB3aW5kb3cKdmFyIE5VWFQgPSB3aW5kb3cuX19OVVhUX18gfHwge307CnZhciAkY29uZmlnID0gTlVYVC5jb25maWcgfHwge307CmlmICgkY29uZmlnLmFwcCkgewogIF9fd2VicGFja19wdWJsaWNfcGF0aF9fID0gdXJsSm9pbigkY29uZmlnLmFwcC5jZG5VUkwsICRjb25maWcuYXBwLmFzc2V0c1BhdGgpOwp9Ck9iamVjdC5hc3NpZ24oVnVlLmNvbmZpZywgewogICJzaWxlbnQiOiB0cnVlLAogICJwZXJmb3JtYW5jZSI6IGZhbHNlCn0pOwp2YXIgZXJyb3JIYW5kbGVyID0gVnVlLmNvbmZpZy5lcnJvckhhbmRsZXIgfHwgY29uc29sZS5lcnJvcjsKCi8vIENyZWF0ZSBhbmQgbW91bnQgQXBwCmNyZWF0ZUFwcChudWxsLCBOVVhULmNvbmZpZykudGhlbihtb3VudEFwcCkuY2F0Y2goZXJyb3JIYW5kbGVyKTsKZnVuY3Rpb24gY29tcG9uZW50T3B0aW9uKGNvbXBvbmVudCwga2V5KSB7CiAgaWYgKCFjb21wb25lbnQgfHwgIWNvbXBvbmVudC5vcHRpb25zIHx8ICFjb21wb25lbnQub3B0aW9uc1trZXldKSB7CiAgICByZXR1cm4ge307CiAgfQogIHZhciBvcHRpb24gPSBjb21wb25lbnQub3B0aW9uc1trZXldOwogIGlmICh0eXBlb2Ygb3B0aW9uID09PSAnZnVuY3Rpb24nKSB7CiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMiA/IF9sZW4gLSAyIDogMCksIF9rZXkgPSAyOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgIGFyZ3NbX2tleSAtIDJdID0gYXJndW1lbnRzW19rZXldOwogICAgfQogICAgcmV0dXJuIG9wdGlvbi5hcHBseSh2b2lkIDAsIGFyZ3MpOwogIH0KICByZXR1cm4gb3B0aW9uOwp9CmZ1bmN0aW9uIG1hcFRyYW5zaXRpb25zKHRvQ29tcG9uZW50cywgdG8sIGZyb20pIHsKICB2YXIgY29tcG9uZW50VHJhbnNpdGlvbnMgPSBmdW5jdGlvbiBjb21wb25lbnRUcmFuc2l0aW9ucyhjb21wb25lbnQpIHsKICAgIHZhciB0cmFuc2l0aW9uID0gY29tcG9uZW50T3B0aW9uKGNvbXBvbmVudCwgJ3RyYW5zaXRpb24nLCB0bywgZnJvbSkgfHwge307CiAgICByZXR1cm4gdHlwZW9mIHRyYW5zaXRpb24gPT09ICdzdHJpbmcnID8gewogICAgICBuYW1lOiB0cmFuc2l0aW9uCiAgICB9IDogdHJhbnNpdGlvbjsKICB9OwogIHZhciBmcm9tQ29tcG9uZW50cyA9IGZyb20gPyBnZXRNYXRjaGVkQ29tcG9uZW50cyhmcm9tKSA6IFtdOwogIHZhciBtYXhEZXB0aCA9IE1hdGgubWF4KHRvQ29tcG9uZW50cy5sZW5ndGgsIGZyb21Db21wb25lbnRzLmxlbmd0aCk7CiAgdmFyIG1lcmdlZFRyYW5zaXRpb25zID0gW107CiAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoKSB7CiAgICAvLyBDbG9uZSBvcmlnaW5hbCBvYmplY3RzIHRvIHByZXZlbnQgb3ZlcnJpZGVzCiAgICB2YXIgdG9UcmFuc2l0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbXBvbmVudFRyYW5zaXRpb25zKHRvQ29tcG9uZW50c1tpXSkpOwogICAgdmFyIHRyYW5zaXRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgY29tcG9uZW50VHJhbnNpdGlvbnMoZnJvbUNvbXBvbmVudHNbaV0pKTsKCiAgICAvLyBDb21iaW5lIHRyYW5zaXRpb25zICYgcHJlZmVyIGBsZWF2ZWAgcHJvcGVydGllcyBvZiAiZnJvbSIgcm91dGUKICAgIE9iamVjdC5rZXlzKHRvVHJhbnNpdGlvbnMpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7CiAgICAgIHJldHVybiB0eXBlb2YgdG9UcmFuc2l0aW9uc1trZXldICE9PSAndW5kZWZpbmVkJyAmJiAha2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2xlYXZlJyk7CiAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgdHJhbnNpdGlvbnNba2V5XSA9IHRvVHJhbnNpdGlvbnNba2V5XTsKICAgIH0pOwogICAgbWVyZ2VkVHJhbnNpdGlvbnMucHVzaCh0cmFuc2l0aW9ucyk7CiAgfTsKICBmb3IgKHZhciBpID0gMDsgaSA8IG1heERlcHRoOyBpKyspIHsKICAgIF9sb29wKCk7CiAgfQogIHJldHVybiBtZXJnZWRUcmFuc2l0aW9uczsKfQpmdW5jdGlvbiBsb2FkQXN5bmNDb21wb25lbnRzKF94LCBfeDIsIF94MykgewogIHJldHVybiBfbG9hZEFzeW5jQ29tcG9uZW50cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmZ1bmN0aW9uIF9sb2FkQXN5bmNDb21wb25lbnRzKCkgewogIF9sb2FkQXN5bmNDb21wb25lbnRzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMih0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICB2YXIgQ29tcG9uZW50cywgc3RhcnRMb2FkZXIsIGVyciwgc3RhdHVzQ29kZSwgbWVzc2FnZTsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICAvLyBDaGVjayBpZiByb3V0ZSBjaGFuZ2VkICh0aGlzLl9yb3V0ZUNoYW5nZWQpLCBvbmx5IGlmIHRoZSBwYWdlIGlzIG5vdCBhbiBlcnJvciAoZm9yIHZhbGlkYXRlKCkpCiAgICAgICAgICB0aGlzLl9yb3V0ZUNoYW5nZWQgPSBCb29sZWFuKGFwcC5udXh0LmVycikgfHwgZnJvbS5uYW1lICE9PSB0by5uYW1lOwogICAgICAgICAgdGhpcy5fcGFyYW1DaGFuZ2VkID0gIXRoaXMuX3JvdXRlQ2hhbmdlZCAmJiBmcm9tLnBhdGggIT09IHRvLnBhdGg7CiAgICAgICAgICB0aGlzLl9xdWVyeUNoYW5nZWQgPSAhdGhpcy5fcGFyYW1DaGFuZ2VkICYmIGZyb20uZnVsbFBhdGggIT09IHRvLmZ1bGxQYXRoOwogICAgICAgICAgdGhpcy5fZGlmZlF1ZXJ5ID0gdGhpcy5fcXVlcnlDaGFuZ2VkID8gZ2V0UXVlcnlEaWZmKHRvLnF1ZXJ5LCBmcm9tLnF1ZXJ5KSA6IFtdOwogICAgICAgICAgaWYgKCh0aGlzLl9yb3V0ZUNoYW5nZWQgfHwgdGhpcy5fcGFyYW1DaGFuZ2VkKSAmJiB0aGlzLiRsb2FkaW5nLnN0YXJ0ICYmICF0aGlzLiRsb2FkaW5nLm1hbnVhbCkgewogICAgICAgICAgICB0aGlzLiRsb2FkaW5nLnN0YXJ0KCk7CiAgICAgICAgICB9CiAgICAgICAgICBfY29udGV4dDIucHJldiA9IDU7CiAgICAgICAgICBpZiAoIXRoaXMuX3F1ZXJ5Q2hhbmdlZCkgewogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgIHJldHVybiByZXNvbHZlUm91dGVDb21wb25lbnRzKHRvLCBmdW5jdGlvbiAoQ29tcG9uZW50LCBpbnN0YW5jZSkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIENvbXBvbmVudDogQ29tcG9uZW50LAogICAgICAgICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZQogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSA5OgogICAgICAgICAgQ29tcG9uZW50cyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgLy8gQWRkIGEgbWFya2VyIG9uIGVhY2ggY29tcG9uZW50IHRoYXQgaXQgbmVlZHMgdG8gcmVmcmVzaCBvciBub3QKICAgICAgICAgIHN0YXJ0TG9hZGVyID0gQ29tcG9uZW50cy5zb21lKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgICAgICB2YXIgQ29tcG9uZW50ID0gX3JlZjIuQ29tcG9uZW50LAogICAgICAgICAgICAgIGluc3RhbmNlID0gX3JlZjIuaW5zdGFuY2U7CiAgICAgICAgICAgIHZhciB3YXRjaFF1ZXJ5ID0gQ29tcG9uZW50Lm9wdGlvbnMud2F0Y2hRdWVyeTsKICAgICAgICAgICAgaWYgKHdhdGNoUXVlcnkgPT09IHRydWUpIHsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh3YXRjaFF1ZXJ5KSkgewogICAgICAgICAgICAgIHJldHVybiB3YXRjaFF1ZXJ5LnNvbWUoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5fZGlmZlF1ZXJ5W2tleV07CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiB3YXRjaFF1ZXJ5ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHdhdGNoUXVlcnkuYXBwbHkoaW5zdGFuY2UsIFt0by5xdWVyeSwgZnJvbS5xdWVyeV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHN0YXJ0TG9hZGVyICYmIHRoaXMuJGxvYWRpbmcuc3RhcnQgJiYgIXRoaXMuJGxvYWRpbmcubWFudWFsKSB7CiAgICAgICAgICAgIHRoaXMuJGxvYWRpbmcuc3RhcnQoKTsKICAgICAgICAgIH0KICAgICAgICBjYXNlIDEyOgogICAgICAgICAgLy8gQ2FsbCBuZXh0KCkKICAgICAgICAgIG5leHQoKTsKICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjY7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE1OgogICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxNTsKICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSg1KTsKICAgICAgICAgIGVyciA9IF9jb250ZXh0Mi50MCB8fCB7fTsKICAgICAgICAgIHN0YXR1c0NvZGUgPSBlcnIuc3RhdHVzQ29kZSB8fCBlcnIuc3RhdHVzIHx8IGVyci5yZXNwb25zZSAmJiBlcnIucmVzcG9uc2Uuc3RhdHVzIHx8IDUwMDsKICAgICAgICAgIG1lc3NhZ2UgPSBlcnIubWVzc2FnZSB8fCAnJzsgLy8gSGFuZGxlIGNodW5rIGxvYWRpbmcgZXJyb3JzCiAgICAgICAgICAvLyBUaGlzIG1heSBiZSBkdWUgdG8gYSBuZXcgZGVwbG95bWVudCBvciBhIG5ldHdvcmsgcHJvYmxlbQogICAgICAgICAgaWYgKCEvXkxvYWRpbmcoIENTUyk/IGNodW5rIChcZCkrIGZhaWxlZFwuLy50ZXN0KG1lc3NhZ2UpKSB7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjM7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlIC8qIHNraXAgY2FjaGUgKi8pOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwogICAgICAgIGNhc2UgMjM6CiAgICAgICAgICB0aGlzLmVycm9yKHsKICAgICAgICAgICAgc3RhdHVzQ29kZTogc3RhdHVzQ29kZSwKICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLiRudXh0LiRlbWl0KCdyb3V0ZUNoYW5nZWQnLCB0bywgZnJvbSwgZXJyKTsKICAgICAgICAgIG5leHQoKTsKICAgICAgICBjYXNlIDI2OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgfQogICAgfSwgX2NhbGxlZTIsIHRoaXMsIFtbNSwgMTVdXSk7CiAgfSkpOwogIHJldHVybiBfbG9hZEFzeW5jQ29tcG9uZW50cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmZ1bmN0aW9uIGFwcGx5U1NSRGF0YShDb21wb25lbnQsIHNzckRhdGEpIHsKICBpZiAoTlVYVC5zZXJ2ZXJSZW5kZXJlZCAmJiBzc3JEYXRhKSB7CiAgICBhcHBseUFzeW5jRGF0YShDb21wb25lbnQsIHNzckRhdGEpOwogIH0KICBDb21wb25lbnQuX0N0b3IgPSBDb21wb25lbnQ7CiAgcmV0dXJuIENvbXBvbmVudDsKfQoKLy8gR2V0IG1hdGNoZWQgY29tcG9uZW50cwpmdW5jdGlvbiByZXNvbHZlQ29tcG9uZW50cyhyb3V0ZXIpIHsKICB2YXIgcGF0aCA9IGdldExvY2F0aW9uKHJvdXRlci5vcHRpb25zLmJhc2UsIHJvdXRlci5vcHRpb25zLm1vZGUpOwogIHJldHVybiBmbGF0TWFwQ29tcG9uZW50cyhyb3V0ZXIubWF0Y2gocGF0aCksIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShDb21wb25lbnQsIF8sIG1hdGNoLCBrZXksIGluZGV4KSB7CiAgICAgIHZhciBfQ29tcG9uZW50OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoISh0eXBlb2YgQ29tcG9uZW50ID09PSAnZnVuY3Rpb24nICYmICFDb21wb25lbnQub3B0aW9ucykpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIENvbXBvbmVudCgpOwogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBDb21wb25lbnQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAvLyBTYW5pdGl6ZSBpdCBhbmQgc2F2ZSBpdAogICAgICAgICAgICBfQ29tcG9uZW50ID0gYXBwbHlTU1JEYXRhKHNhbml0aXplQ29tcG9uZW50KENvbXBvbmVudCksIE5VWFQuZGF0YSA/IE5VWFQuZGF0YVtpbmRleF0gOiBudWxsKTsKICAgICAgICAgICAgbWF0Y2guY29tcG9uZW50c1trZXldID0gX0NvbXBvbmVudDsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX0NvbXBvbmVudCk7CiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CiAgICByZXR1cm4gZnVuY3Rpb24gKF94NCwgX3g1LCBfeDYsIF94NywgX3g4KSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKSk7Cn0KZnVuY3Rpb24gY2FsbE1pZGRsZXdhcmUoQ29tcG9uZW50cywgY29udGV4dCwgbGF5b3V0KSB7CiAgdmFyIF90aGlzID0gdGhpczsKICB2YXIgbWlkZCA9IFtdOwogIHZhciB1bmtub3duTWlkZGxld2FyZSA9IGZhbHNlOwoKICAvLyBJZiBsYXlvdXQgaXMgdW5kZWZpbmVkLCBvbmx5IGNhbGwgZ2xvYmFsIG1pZGRsZXdhcmUKICBpZiAodHlwZW9mIGxheW91dCAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgIG1pZGQgPSBbXTsgLy8gRXhjbHVkZSBnbG9iYWwgbWlkZGxld2FyZSBpZiBsYXlvdXQgZGVmaW5lZCAoYWxyZWFkeSBjYWxsZWQgYmVmb3JlKQogICAgbGF5b3V0ID0gc2FuaXRpemVDb21wb25lbnQobGF5b3V0KTsKICAgIGlmIChsYXlvdXQub3B0aW9ucy5taWRkbGV3YXJlKSB7CiAgICAgIG1pZGQgPSBtaWRkLmNvbmNhdChsYXlvdXQub3B0aW9ucy5taWRkbGV3YXJlKTsKICAgIH0KICAgIENvbXBvbmVudHMuZm9yRWFjaChmdW5jdGlvbiAoQ29tcG9uZW50KSB7CiAgICAgIGlmIChDb21wb25lbnQub3B0aW9ucy5taWRkbGV3YXJlKSB7CiAgICAgICAgbWlkZCA9IG1pZGQuY29uY2F0KENvbXBvbmVudC5vcHRpb25zLm1pZGRsZXdhcmUpOwogICAgICB9CiAgICB9KTsKICB9CiAgbWlkZCA9IG1pZGQubWFwKGZ1bmN0aW9uIChuYW1lKSB7CiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgcmV0dXJuIG5hbWU7CiAgICB9CiAgICBpZiAodHlwZW9mIG1pZGRsZXdhcmVbbmFtZV0gIT09ICdmdW5jdGlvbicpIHsKICAgICAgdW5rbm93bk1pZGRsZXdhcmUgPSB0cnVlOwogICAgICBfdGhpcy5lcnJvcih7CiAgICAgICAgc3RhdHVzQ29kZTogNTAwLAogICAgICAgIG1lc3NhZ2U6ICdVbmtub3duIG1pZGRsZXdhcmUgJyArIG5hbWUKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gbWlkZGxld2FyZVtuYW1lXTsKICB9KTsKICBpZiAodW5rbm93bk1pZGRsZXdhcmUpIHsKICAgIHJldHVybjsKICB9CiAgcmV0dXJuIG1pZGRsZXdhcmVTZXJpZXMobWlkZCwgY29udGV4dCk7Cn0KZnVuY3Rpb24gcmVuZGVyKF94OSwgX3gxMCwgX3gxMSkgewogIHJldHVybiBfcmVuZGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0gLy8gRml4IGNvbXBvbmVudHMgZm9ybWF0IGluIG1hdGNoZWQsIGl0J3MgZHVlIHRvIGNvZGUtc3BsaXR0aW5nIG9mIHZ1ZS1yb3V0ZXIKZnVuY3Rpb24gX3JlbmRlcigpIHsKICBfcmVuZGVyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCh0bywgZnJvbSwgbmV4dCkgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICB2YXIgc3BhRmFsbGJhY2ssIGZyb21NYXRjaGVzLCBuZXh0Q2FsbGVkLCBfbmV4dCwgbWF0Y2hlcywgQ29tcG9uZW50cywgZXJyb3JMYXlvdXQsIGxheW91dCwgX2xheW91dCwgaXNWYWxpZCwgX2l0ZXJhdG9yLCBfc3RlcCwgQ29tcG9uZW50LCBpbnN0YW5jZXMsIGVycm9yLCBfbGF5b3V0MjsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBpZiAoISh0aGlzLl9yb3V0ZUNoYW5nZWQgPT09IGZhbHNlICYmIHRoaXMuX3BhcmFtQ2hhbmdlZCA9PT0gZmFsc2UgJiYgdGhpcy5fcXVlcnlDaGFuZ2VkID09PSBmYWxzZSkpIHsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwogICAgICAgIGNhc2UgMjoKICAgICAgICAgIC8vIEhhbmRsZSBmaXJzdCByZW5kZXIgb24gU1BBIG1vZGUKICAgICAgICAgIHNwYUZhbGxiYWNrID0gZmFsc2U7CiAgICAgICAgICBpZiAodG8gPT09IGZyb20pIHsKICAgICAgICAgICAgX2xhc3RQYXRocyA9IFtdOwogICAgICAgICAgICBzcGFGYWxsYmFjayA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmcm9tTWF0Y2hlcyA9IFtdOwogICAgICAgICAgICBfbGFzdFBhdGhzID0gZ2V0TWF0Y2hlZENvbXBvbmVudHMoZnJvbSwgZnJvbU1hdGNoZXMpLm1hcChmdW5jdGlvbiAoQ29tcG9uZW50LCBpKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbXBpbGUoZnJvbS5tYXRjaGVkW2Zyb21NYXRjaGVzW2ldXS5wYXRoKShmcm9tLnBhcmFtcyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIG5leHRDYWxsZWQgaXMgdHJ1ZSB3aGVuIHJlZGlyZWN0ZWQKICAgICAgICAgIG5leHRDYWxsZWQgPSBmYWxzZTsKICAgICAgICAgIF9uZXh0ID0gZnVuY3Rpb24gX25leHQocGF0aCkgewogICAgICAgICAgICBpZiAoZnJvbS5wYXRoID09PSBwYXRoLnBhdGggJiYgX3RoaXM0LiRsb2FkaW5nLmZpbmlzaCkgewogICAgICAgICAgICAgIF90aGlzNC4kbG9hZGluZy5maW5pc2goKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZnJvbS5wYXRoICE9PSBwYXRoLnBhdGggJiYgX3RoaXM0LiRsb2FkaW5nLnBhdXNlKSB7CiAgICAgICAgICAgICAgX3RoaXM0LiRsb2FkaW5nLnBhdXNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKG5leHRDYWxsZWQpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbmV4dENhbGxlZCA9IHRydWU7CiAgICAgICAgICAgIG5leHQocGF0aCk7CiAgICAgICAgICB9OyAvLyBVcGRhdGUgY29udGV4dAogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA4OwogICAgICAgICAgcmV0dXJuIHNldENvbnRleHQoYXBwLCB7CiAgICAgICAgICAgIHJvdXRlOiB0bywKICAgICAgICAgICAgZnJvbTogZnJvbSwKICAgICAgICAgICAgbmV4dDogX25leHQuYmluZCh0aGlzKQogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSA4OgogICAgICAgICAgdGhpcy5fZGF0ZUxhc3RFcnJvciA9IGFwcC5udXh0LmRhdGVFcnI7CiAgICAgICAgICB0aGlzLl9oYWRFcnJvciA9IEJvb2xlYW4oYXBwLm51eHQuZXJyKTsKCiAgICAgICAgICAvLyBHZXQgcm91dGUncyBtYXRjaGVkIGNvbXBvbmVudHMKICAgICAgICAgIG1hdGNoZXMgPSBbXTsKICAgICAgICAgIENvbXBvbmVudHMgPSBnZXRNYXRjaGVkQ29tcG9uZW50cyh0bywgbWF0Y2hlcyk7IC8vIElmIG5vIENvbXBvbmVudHMgbWF0Y2hlZCwgZ2VuZXJhdGUgNDA0CiAgICAgICAgICBpZiAoQ29tcG9uZW50cy5sZW5ndGgpIHsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyNzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE1OwogICAgICAgICAgcmV0dXJuIGNhbGxNaWRkbGV3YXJlLmNhbGwodGhpcywgQ29tcG9uZW50cywgYXBwLmNvbnRleHQpOwogICAgICAgIGNhc2UgMTU6CiAgICAgICAgICBpZiAoIW5leHRDYWxsZWQpIHsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgY2FzZSAxNzoKICAgICAgICAgIC8vIExvYWQgbGF5b3V0IGZvciBlcnJvciBwYWdlCiAgICAgICAgICBlcnJvckxheW91dCA9IChOdXh0RXJyb3Iub3B0aW9ucyB8fCBOdXh0RXJyb3IpLmxheW91dDsKICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjA7CiAgICAgICAgICByZXR1cm4gdGhpcy5sb2FkTGF5b3V0KHR5cGVvZiBlcnJvckxheW91dCA9PT0gJ2Z1bmN0aW9uJyA/IGVycm9yTGF5b3V0LmNhbGwoTnV4dEVycm9yLCBhcHAuY29udGV4dCkgOiBlcnJvckxheW91dCk7CiAgICAgICAgY2FzZSAyMDoKICAgICAgICAgIGxheW91dCA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMzsKICAgICAgICAgIHJldHVybiBjYWxsTWlkZGxld2FyZS5jYWxsKHRoaXMsIENvbXBvbmVudHMsIGFwcC5jb250ZXh0LCBsYXlvdXQpOwogICAgICAgIGNhc2UgMjM6CiAgICAgICAgICBpZiAoIW5leHRDYWxsZWQpIHsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyNTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgY2FzZSAyNToKICAgICAgICAgIC8vIFNob3cgZXJyb3IgcGFnZQogICAgICAgICAgYXBwLmNvbnRleHQuZXJyb3IoewogICAgICAgICAgICBzdGF0dXNDb2RlOiA0MDQsCiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgbmV4dCgpKTsKICAgICAgICBjYXNlIDI3OgogICAgICAgICAgLy8gVXBkYXRlIC5fZGF0YSBhbmQgb3RoZXIgcHJvcGVydGllcyBpZiBob3QgcmVsb2FkZWQKICAgICAgICAgIENvbXBvbmVudHMuZm9yRWFjaChmdW5jdGlvbiAoQ29tcG9uZW50KSB7CiAgICAgICAgICAgIGlmIChDb21wb25lbnQuX0N0b3IgJiYgQ29tcG9uZW50Ll9DdG9yLm9wdGlvbnMpIHsKICAgICAgICAgICAgICBDb21wb25lbnQub3B0aW9ucy5hc3luY0RhdGEgPSBDb21wb25lbnQuX0N0b3Iub3B0aW9ucy5hc3luY0RhdGE7CiAgICAgICAgICAgICAgQ29tcG9uZW50Lm9wdGlvbnMuZmV0Y2ggPSBDb21wb25lbnQuX0N0b3Iub3B0aW9ucy5mZXRjaDsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CgogICAgICAgICAgLy8gQXBwbHkgdHJhbnNpdGlvbnMKICAgICAgICAgIHRoaXMuc2V0VHJhbnNpdGlvbnMobWFwVHJhbnNpdGlvbnMoQ29tcG9uZW50cywgdG8sIGZyb20pKTsKICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMjk7CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDMyOwogICAgICAgICAgcmV0dXJuIGNhbGxNaWRkbGV3YXJlLmNhbGwodGhpcywgQ29tcG9uZW50cywgYXBwLmNvbnRleHQpOwogICAgICAgIGNhc2UgMzI6CiAgICAgICAgICBpZiAoIW5leHRDYWxsZWQpIHsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzNDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgY2FzZSAzNDoKICAgICAgICAgIGlmICghYXBwLmNvbnRleHQuX2Vycm9yZWQpIHsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzNjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgbmV4dCgpKTsKICAgICAgICBjYXNlIDM2OgogICAgICAgICAgLy8gU2V0IGxheW91dAogICAgICAgICAgX2xheW91dCA9IENvbXBvbmVudHNbMF0ub3B0aW9ucy5sYXlvdXQ7CiAgICAgICAgICBpZiAodHlwZW9mIF9sYXlvdXQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgX2xheW91dCA9IF9sYXlvdXQoYXBwLmNvbnRleHQpOwogICAgICAgICAgfQogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0MDsKICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRMYXlvdXQoX2xheW91dCk7CiAgICAgICAgY2FzZSA0MDoKICAgICAgICAgIF9sYXlvdXQgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDM7CiAgICAgICAgICByZXR1cm4gY2FsbE1pZGRsZXdhcmUuY2FsbCh0aGlzLCBDb21wb25lbnRzLCBhcHAuY29udGV4dCwgX2xheW91dCk7CiAgICAgICAgY2FzZSA0MzoKICAgICAgICAgIGlmICghbmV4dENhbGxlZCkgewogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ1OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICBjYXNlIDQ1OgogICAgICAgICAgaWYgKCFhcHAuY29udGV4dC5fZXJyb3JlZCkgewogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ3OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwogICAgICAgIGNhc2UgNDc6CiAgICAgICAgICAvLyBDYWxsIC52YWxpZGF0ZSgpCiAgICAgICAgICBpc1ZhbGlkID0gdHJ1ZTsKICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gNDg7CiAgICAgICAgICBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihDb21wb25lbnRzKTsKICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gNTA7CiAgICAgICAgICBfaXRlcmF0b3IucygpOwogICAgICAgIGNhc2UgNTI6CiAgICAgICAgICBpZiAoKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZSkgewogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDYzOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIENvbXBvbmVudCA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgaWYgKCEodHlwZW9mIENvbXBvbmVudC5vcHRpb25zLnZhbGlkYXRlICE9PSAnZnVuY3Rpb24nKSkgewogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU2OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJjb250aW51ZSIsIDYxKTsKICAgICAgICBjYXNlIDU2OgogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1ODsKICAgICAgICAgIHJldHVybiBDb21wb25lbnQub3B0aW9ucy52YWxpZGF0ZShhcHAuY29udGV4dCk7CiAgICAgICAgY2FzZSA1ODoKICAgICAgICAgIGlzVmFsaWQgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgIGlmIChpc1ZhbGlkKSB7CiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoImJyZWFrIiwgNjMpOwogICAgICAgIGNhc2UgNjE6CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDUyOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSA2MzoKICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNjg7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDY1OgogICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSA2NTsKICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NFsiY2F0Y2giXSg1MCk7CiAgICAgICAgICBfaXRlcmF0b3IuZShfY29udGV4dDQudDApOwogICAgICAgIGNhc2UgNjg6CiAgICAgICAgICBfY29udGV4dDQucHJldiA9IDY4OwogICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDQuZmluaXNoKDY4KTsKICAgICAgICBjYXNlIDcxOgogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA3NzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgNzM6CiAgICAgICAgICBfY29udGV4dDQucHJldiA9IDczOwogICAgICAgICAgX2NvbnRleHQ0LnQxID0gX2NvbnRleHQ0WyJjYXRjaCJdKDQ4KTsKICAgICAgICAgIC8vIC4uLklmIC52YWxpZGF0ZSgpIHRocmV3IGFuIGVycm9yCiAgICAgICAgICB0aGlzLmVycm9yKHsKICAgICAgICAgICAgc3RhdHVzQ29kZTogX2NvbnRleHQ0LnQxLnN0YXR1c0NvZGUgfHwgJzUwMCcsCiAgICAgICAgICAgIG1lc3NhZ2U6IF9jb250ZXh0NC50MS5tZXNzYWdlCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwogICAgICAgIGNhc2UgNzc6CiAgICAgICAgICBpZiAoaXNWYWxpZCkgewogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDgwOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZXJyb3IoewogICAgICAgICAgICBzdGF0dXNDb2RlOiA0MDQsCiAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJwogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgbmV4dCgpKTsKICAgICAgICBjYXNlIDgwOgogICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA4MjsKICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChDb21wb25lbnRzLm1hcCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9yZWYzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhDb21wb25lbnQsIGkpIHsKICAgICAgICAgICAgICB2YXIgY2hpbGRQYXRoQ2hhbmdlZCwgd2F0Y2hQYXJhbSwgd2F0Y2hRdWVyeSwgcHJvbWlzZXMsIGhhc0FzeW5jRGF0YSwgaGFzRmV0Y2gsIGxvYWRpbmdJbmNyZWFzZSwgcHJvbWlzZSwgcDsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb25seSBjaGlsZHJlbiByb3V0ZSBjaGFuZ2VkCiAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50Ll9wYXRoID0gY29tcGlsZSh0by5tYXRjaGVkW21hdGNoZXNbaV1dLnBhdGgpKHRvLnBhcmFtcyk7CiAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50Ll9kYXRhUmVmcmVzaCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGNoaWxkUGF0aENoYW5nZWQgPSBDb21wb25lbnQuX3BhdGggIT09IF9sYXN0UGF0aHNbaV07IC8vIFJlZnJlc2ggY29tcG9uZW50IChjYWxsIGFzeW5jRGF0YSAmIGZldGNoKSB3aGVuOgogICAgICAgICAgICAgICAgICAgIC8vIFJvdXRlIHBhdGggY2hhbmdlZCBwYXJ0IGluY2x1ZGVzIGN1cnJlbnQgY29tcG9uZW50CiAgICAgICAgICAgICAgICAgICAgLy8gT3Igcm91dGUgcGFyYW0gY2hhbmdlZCBwYXJ0IGluY2x1ZGVzIGN1cnJlbnQgY29tcG9uZW50IGFuZCB3YXRjaFBhcmFtIGlzIG5vdCBgZmFsc2VgCiAgICAgICAgICAgICAgICAgICAgLy8gT3Igcm91dGUgcXVlcnkgaXMgY2hhbmdlZCBhbmQgd2F0Y2hRdWVyeSByZXR1cm5zIGB0cnVlYAogICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczQuX3JvdXRlQ2hhbmdlZCAmJiBjaGlsZFBhdGhDaGFuZ2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICBDb21wb25lbnQuX2RhdGFSZWZyZXNoID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzNC5fcGFyYW1DaGFuZ2VkICYmIGNoaWxkUGF0aENoYW5nZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdhdGNoUGFyYW0gPSBDb21wb25lbnQub3B0aW9ucy53YXRjaFBhcmFtOwogICAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50Ll9kYXRhUmVmcmVzaCA9IHdhdGNoUGFyYW0gIT09IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXM0Ll9xdWVyeUNoYW5nZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIHdhdGNoUXVlcnkgPSBDb21wb25lbnQub3B0aW9ucy53YXRjaFF1ZXJ5OwogICAgICAgICAgICAgICAgICAgICAgaWYgKHdhdGNoUXVlcnkgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50Ll9kYXRhUmVmcmVzaCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkod2F0Y2hRdWVyeSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgQ29tcG9uZW50Ll9kYXRhUmVmcmVzaCA9IHdhdGNoUXVlcnkuc29tZShmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5fZGlmZlF1ZXJ5W2tleV07CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygd2F0Y2hRdWVyeSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWluc3RhbmNlcykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlcyA9IGdldE1hdGNoZWRDb21wb25lbnRzSW5zdGFuY2VzKHRvKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBDb21wb25lbnQuX2RhdGFSZWZyZXNoID0gd2F0Y2hRdWVyeS5hcHBseShpbnN0YW5jZXNbaV0sIFt0by5xdWVyeSwgZnJvbS5xdWVyeV0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoISghX3RoaXM0Ll9oYWRFcnJvciAmJiBfdGhpczQuX2lzTW91bnRlZCAmJiAhQ29tcG9uZW50Ll9kYXRhUmVmcmVzaCkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICBwcm9taXNlcyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGhhc0FzeW5jRGF0YSA9IENvbXBvbmVudC5vcHRpb25zLmFzeW5jRGF0YSAmJiB0eXBlb2YgQ29tcG9uZW50Lm9wdGlvbnMuYXN5bmNEYXRhID09PSAnZnVuY3Rpb24nOwogICAgICAgICAgICAgICAgICAgIGhhc0ZldGNoID0gQm9vbGVhbihDb21wb25lbnQub3B0aW9ucy5mZXRjaCkgJiYgQ29tcG9uZW50Lm9wdGlvbnMuZmV0Y2gubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgIGxvYWRpbmdJbmNyZWFzZSA9IGhhc0FzeW5jRGF0YSAmJiBoYXNGZXRjaCA/IDMwIDogNDU7IC8vIENhbGwgYXN5bmNEYXRhKGNvbnRleHQpCiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0FzeW5jRGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNC5pc1ByZXZpZXcgfHwgc3BhRmFsbGJhY2spIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSA9IHByb21pc2lmeShDb21wb25lbnQub3B0aW9ucy5hc3luY0RhdGEsIGFwcC5jb250ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UgPSBfdGhpczQuZmV0Y2hQYXlsb2FkKHRvLnBhdGgpLnRoZW4oZnVuY3Rpb24gKHBheWxvYWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF5bG9hZC5kYXRhW2ldOwogICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoX2VycikgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNpZnkoQ29tcG9uZW50Lm9wdGlvbnMuYXN5bmNEYXRhLCBhcHAuY29udGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyAvLyBGYWxsYmFjawogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAoYXN5bmNEYXRhUmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5QXN5bmNEYXRhKENvbXBvbmVudCwgYXN5bmNEYXRhUmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNC4kbG9hZGluZy5pbmNyZWFzZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC4kbG9hZGluZy5pbmNyZWFzZShsb2FkaW5nSW5jcmVhc2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2gocHJvbWlzZSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBkaXNhYmxlZCBwYWdlIGxvYWRpbmcKICAgICAgICAgICAgICAgICAgICBfdGhpczQuJGxvYWRpbmcubWFudWFsID0gQ29tcG9uZW50Lm9wdGlvbnMubG9hZGluZyA9PT0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpczQuaXNQcmV2aWV3ICYmICFzcGFGYWxsYmFjaykgewogICAgICAgICAgICAgICAgICAgICAgLy8gQ2F0Y2hpbmcgdGhlIGVycm9yIGhlcmUgZm9yIGxldHRpbmcgdGhlIFNQQSBmYWxsYmFjayBhbmQgbm9ybWFsIGZldGNoIGJlaGF2aW91cgogICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChfdGhpczQuZmV0Y2hQYXlsb2FkKHRvLnBhdGgpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBDYWxsIGZldGNoKGNvbnRleHQpCiAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0ZldGNoKSB7CiAgICAgICAgICAgICAgICAgICAgICBwID0gQ29tcG9uZW50Lm9wdGlvbnMuZmV0Y2goYXBwLmNvbnRleHQpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKCFwIHx8ICEocCBpbnN0YW5jZW9mIFByb21pc2UpICYmIHR5cGVvZiBwLnRoZW4gIT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcCA9IFByb21pc2UucmVzb2x2ZShwKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHAudGhlbihmdW5jdGlvbiAoZmV0Y2hSZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzNC4kbG9hZGluZy5pbmNyZWFzZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNC4kbG9hZGluZy5pbmNyZWFzZShsb2FkaW5nSW5jcmVhc2UpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2gocCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLmFsbChwcm9taXNlcykpOwogICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgICAgfSkpOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTMsIF94MTQpIHsKICAgICAgICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0oKSkpOwogICAgICAgIGNhc2UgODI6CiAgICAgICAgICAvLyBJZiBub3QgcmVkaXJlY3RlZAogICAgICAgICAgaWYgKCFuZXh0Q2FsbGVkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLiRsb2FkaW5nLmZpbmlzaCAmJiAhdGhpcy4kbG9hZGluZy5tYW51YWwpIHsKICAgICAgICAgICAgICB0aGlzLiRsb2FkaW5nLmZpbmlzaCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgIH0KICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gOTk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDg1OgogICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSA4NTsKICAgICAgICAgIF9jb250ZXh0NC50MiA9IF9jb250ZXh0NFsiY2F0Y2giXSgyOSk7CiAgICAgICAgICBlcnJvciA9IF9jb250ZXh0NC50MiB8fCB7fTsKICAgICAgICAgIGlmICghKGVycm9yLm1lc3NhZ2UgPT09ICdFUlJfUkVESVJFQ1QnKSkgewogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDkwOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCB0aGlzLiRudXh0LiRlbWl0KCdyb3V0ZUNoYW5nZWQnLCB0bywgZnJvbSwgZXJyb3IpKTsKICAgICAgICBjYXNlIDkwOgogICAgICAgICAgX2xhc3RQYXRocyA9IFtdOwogICAgICAgICAgZ2xvYmFsSGFuZGxlRXJyb3IoZXJyb3IpOwoKICAgICAgICAgIC8vIExvYWQgZXJyb3IgbGF5b3V0CiAgICAgICAgICBfbGF5b3V0MiA9IChOdXh0RXJyb3Iub3B0aW9ucyB8fCBOdXh0RXJyb3IpLmxheW91dDsKICAgICAgICAgIGlmICh0eXBlb2YgX2xheW91dDIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgX2xheW91dDIgPSBfbGF5b3V0MihhcHAuY29udGV4dCk7CiAgICAgICAgICB9CiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDk2OwogICAgICAgICAgcmV0dXJuIHRoaXMubG9hZExheW91dChfbGF5b3V0Mik7CiAgICAgICAgY2FzZSA5NjoKICAgICAgICAgIHRoaXMuZXJyb3IoZXJyb3IpOwogICAgICAgICAgdGhpcy4kbnV4dC4kZW1pdCgncm91dGVDaGFuZ2VkJywgdG8sIGZyb20sIGVycm9yKTsKICAgICAgICAgIG5leHQoKTsKICAgICAgICBjYXNlIDk5OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgfQogICAgfSwgX2NhbGxlZTQsIHRoaXMsIFtbMjksIDg1XSwgWzQ4LCA3M10sIFs1MCwgNjUsIDY4LCA3MV1dKTsKICB9KSk7CiAgcmV0dXJuIF9yZW5kZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpmdW5jdGlvbiBub3JtYWxpemVDb21wb25lbnRzKHRvLCBfX18pIHsKICBmbGF0TWFwQ29tcG9uZW50cyh0bywgZnVuY3Rpb24gKENvbXBvbmVudCwgXywgbWF0Y2gsIGtleSkgewogICAgaWYgKF90eXBlb2YoQ29tcG9uZW50KSA9PT0gJ29iamVjdCcgJiYgIUNvbXBvbmVudC5vcHRpb25zKSB7CiAgICAgIC8vIFVwZGF0ZWQgdmlhIHZ1ZS1yb3V0ZXIgcmVzb2x2ZUFzeW5jQ29tcG9uZW50cygpCiAgICAgIENvbXBvbmVudCA9IFZ1ZS5leHRlbmQoQ29tcG9uZW50KTsKICAgICAgQ29tcG9uZW50Ll9DdG9yID0gQ29tcG9uZW50OwogICAgICBtYXRjaC5jb21wb25lbnRzW2tleV0gPSBDb21wb25lbnQ7CiAgICB9CiAgICByZXR1cm4gQ29tcG9uZW50OwogIH0pOwp9CmZ1bmN0aW9uIHNldExheW91dEZvck5leHRQYWdlKHRvKSB7CiAgLy8gU2V0IGxheW91dAogIHZhciBoYXNFcnJvciA9IEJvb2xlYW4odGhpcy4kb3B0aW9ucy5udXh0LmVycik7CiAgaWYgKHRoaXMuX2hhZEVycm9yICYmIHRoaXMuX2RhdGVMYXN0RXJyb3IgPT09IHRoaXMuJG9wdGlvbnMubnV4dC5kYXRlRXJyKSB7CiAgICBoYXNFcnJvciA9IGZhbHNlOwogIH0KICB2YXIgbGF5b3V0ID0gaGFzRXJyb3IgPyAoTnV4dEVycm9yLm9wdGlvbnMgfHwgTnV4dEVycm9yKS5sYXlvdXQgOiB0by5tYXRjaGVkWzBdLmNvbXBvbmVudHMuZGVmYXVsdC5vcHRpb25zLmxheW91dDsKICBpZiAodHlwZW9mIGxheW91dCA9PT0gJ2Z1bmN0aW9uJykgewogICAgbGF5b3V0ID0gbGF5b3V0KGFwcC5jb250ZXh0KTsKICB9CiAgdGhpcy5zZXRMYXlvdXQobGF5b3V0KTsKfQpmdW5jdGlvbiBjaGVja0ZvckVycm9ycyhhcHApIHsKICAvLyBIaWRlIGVycm9yIGNvbXBvbmVudCBpZiBubyBlcnJvcgogIGlmIChhcHAuX2hhZEVycm9yICYmIGFwcC5fZGF0ZUxhc3RFcnJvciA9PT0gYXBwLiRvcHRpb25zLm51eHQuZGF0ZUVycikgewogICAgYXBwLmVycm9yKCk7CiAgfQp9CgovLyBXaGVuIG5hdmlnYXRpbmcgb24gYSBkaWZmZXJlbnQgcm91dGUgYnV0IHRoZSBzYW1lIGNvbXBvbmVudCBpcyB1c2VkLCBWdWUuanMKLy8gV2lsbCBub3QgdXBkYXRlIHRoZSBpbnN0YW5jZSBkYXRhLCBzbyB3ZSBoYXZlIHRvIHVwZGF0ZSAkZGF0YSBvdXJzZWx2ZXMKZnVuY3Rpb24gZml4UHJlcGF0Y2godG8sIF9fXykgewogIHZhciBfdGhpczIgPSB0aGlzOwogIGlmICh0aGlzLl9yb3V0ZUNoYW5nZWQgPT09IGZhbHNlICYmIHRoaXMuX3BhcmFtQ2hhbmdlZCA9PT0gZmFsc2UgJiYgdGhpcy5fcXVlcnlDaGFuZ2VkID09PSBmYWxzZSkgewogICAgcmV0dXJuOwogIH0KICB2YXIgaW5zdGFuY2VzID0gZ2V0TWF0Y2hlZENvbXBvbmVudHNJbnN0YW5jZXModG8pOwogIHZhciBDb21wb25lbnRzID0gZ2V0TWF0Y2hlZENvbXBvbmVudHModG8pOwogIHZhciB0cmlnZ2VyU2Nyb2xsID0gZmFsc2U7CiAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgIGluc3RhbmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChpbnN0YW5jZSwgaSkgewogICAgICBpZiAoIWluc3RhbmNlIHx8IGluc3RhbmNlLl9pc0Rlc3Ryb3llZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoaW5zdGFuY2UuY29uc3RydWN0b3IuX2RhdGFSZWZyZXNoICYmIENvbXBvbmVudHNbaV0gPT09IGluc3RhbmNlLmNvbnN0cnVjdG9yICYmIGluc3RhbmNlLiR2bm9kZS5kYXRhLmtlZXBBbGl2ZSAhPT0gdHJ1ZSAmJiB0eXBlb2YgaW5zdGFuY2UuY29uc3RydWN0b3Iub3B0aW9ucy5kYXRhID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgdmFyIG5ld0RhdGEgPSBpbnN0YW5jZS5jb25zdHJ1Y3Rvci5vcHRpb25zLmRhdGEuY2FsbChpbnN0YW5jZSk7CiAgICAgICAgZm9yICh2YXIga2V5IGluIG5ld0RhdGEpIHsKICAgICAgICAgIFZ1ZS5zZXQoaW5zdGFuY2UuJGRhdGEsIGtleSwgbmV3RGF0YVtrZXldKTsKICAgICAgICB9CiAgICAgICAgdHJpZ2dlclNjcm9sbCA9IHRydWU7CiAgICAgIH0KICAgIH0pOwogICAgaWYgKHRyaWdnZXJTY3JvbGwpIHsKICAgICAgLy8gRW5zdXJlIHRvIHRyaWdnZXIgc2Nyb2xsIGV2ZW50IGFmdGVyIGNhbGxpbmcgc2Nyb2xsQmVoYXZpb3IKICAgICAgd2luZG93LiRudXh0LiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgd2luZG93LiRudXh0LiRlbWl0KCd0cmlnZ2VyU2Nyb2xsJyk7CiAgICAgIH0pOwogICAgfQogICAgY2hlY2tGb3JFcnJvcnMoX3RoaXMyKTsKICB9KTsKfQpmdW5jdGlvbiBudXh0UmVhZHkoX2FwcCkgewogIHdpbmRvdy5vbk51eHRSZWFkeUNicy5mb3JFYWNoKGZ1bmN0aW9uIChjYikgewogICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBjYihfYXBwKTsKICAgIH0KICB9KTsKICAvLyBTcGVjaWFsIEpTRE9NCiAgaWYgKHR5cGVvZiB3aW5kb3cuX29uTnV4dExvYWRlZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgd2luZG93Ll9vbk51eHRMb2FkZWQoX2FwcCk7CiAgfQogIC8vIEFkZCByb3V0ZXIgaG9va3MKICByb3V0ZXIuYWZ0ZXJFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSkgewogICAgLy8gV2FpdCBmb3IgZml4UHJlcGF0Y2ggKyAkZGF0YSB1cGRhdGVzCiAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX2FwcC4kbnV4dC4kZW1pdCgncm91dGVDaGFuZ2VkJywgdG8sIGZyb20pOwogICAgfSk7CiAgfSk7Cn0KZnVuY3Rpb24gbW91bnRBcHAoX3gxMikgewogIHJldHVybiBfbW91bnRBcHAuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpmdW5jdGlvbiBfbW91bnRBcHAoKSB7CiAgX21vdW50QXBwID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShfX2FwcCkgewogICAgdmFyIF9hcHAsIHBheWxvYWQsIGxheW91dCwgbW91bnQsIENvbXBvbmVudHMsIGNsaWVudEZpcnN0TW91bnQ7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgLy8gU2V0IGdsb2JhbCB2YXJpYWJsZXMKICAgICAgICAgIGFwcCA9IF9fYXBwLmFwcDsKICAgICAgICAgIHJvdXRlciA9IF9fYXBwLnJvdXRlcjsKCiAgICAgICAgICAvLyBDcmVhdGUgVnVlIGluc3RhbmNlCiAgICAgICAgICBfYXBwID0gbmV3IFZ1ZShhcHApOyAvLyBMb2FkIHBhZ2UgY2h1bmsKICAgICAgICAgIGlmICghKCFOVVhULmRhdGEgJiYgTlVYVC5zZXJ2ZXJSZW5kZXJlZCkpIHsKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxMzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgICBfY29udGV4dDUucHJldiA9IDQ7CiAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDc7CiAgICAgICAgICByZXR1cm4gX2FwcC5mZXRjaFBheWxvYWQoTlVYVC5yb3V0ZVBhdGggfHwgX2FwcC5jb250ZXh0LnJvdXRlLnBhdGgpOwogICAgICAgIGNhc2UgNzoKICAgICAgICAgIHBheWxvYWQgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgIE9iamVjdC5hc3NpZ24oTlVYVCwgcGF5bG9hZCk7CiAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDEzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxMToKICAgICAgICAgIF9jb250ZXh0NS5wcmV2ID0gMTE7CiAgICAgICAgICBfY29udGV4dDUudDAgPSBfY29udGV4dDVbImNhdGNoIl0oNCk7CiAgICAgICAgY2FzZSAxMzoKICAgICAgICAgIC8vIExvYWQgbGF5b3V0CiAgICAgICAgICBsYXlvdXQgPSBOVVhULmxheW91dCB8fCAnZGVmYXVsdCc7CiAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE2OwogICAgICAgICAgcmV0dXJuIF9hcHAubG9hZExheW91dChsYXlvdXQpOwogICAgICAgIGNhc2UgMTY6CiAgICAgICAgICBfYXBwLnNldExheW91dChsYXlvdXQpOwoKICAgICAgICAgIC8vIE1vdW50cyBWdWUgYXBwIHRvIERPTSBlbGVtZW50CiAgICAgICAgICBtb3VudCA9IGZ1bmN0aW9uIG1vdW50KCkgewogICAgICAgICAgICBfYXBwLiRtb3VudCgnI19fbnV4dCcpOwoKICAgICAgICAgICAgLy8gQWRkIGFmdGVyRWFjaCByb3V0ZXIgaG9va3MKICAgICAgICAgICAgcm91dGVyLmFmdGVyRWFjaChub3JtYWxpemVDb21wb25lbnRzKTsKICAgICAgICAgICAgcm91dGVyLmFmdGVyRWFjaChzZXRMYXlvdXRGb3JOZXh0UGFnZS5iaW5kKF9hcHApKTsKICAgICAgICAgICAgcm91dGVyLmFmdGVyRWFjaChmaXhQcmVwYXRjaC5iaW5kKF9hcHApKTsKCiAgICAgICAgICAgIC8vIExpc3RlbiBmb3IgZmlyc3QgVnVlIHVwZGF0ZQogICAgICAgICAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIC8vIENhbGwgd2luZG93Lnt7Z2xvYmFscy5yZWFkeUNhbGxiYWNrfX0gY2FsbGJhY2tzCiAgICAgICAgICAgICAgbnV4dFJlYWR5KF9hcHApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH07IC8vIFJlc29sdmUgcm91dGUgY29tcG9uZW50cwogICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAyMDsKICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChyZXNvbHZlQ29tcG9uZW50cyhyb3V0ZXIpKTsKICAgICAgICBjYXNlIDIwOgogICAgICAgICAgQ29tcG9uZW50cyA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgLy8gRW5hYmxlIHRyYW5zaXRpb25zCiAgICAgICAgICBfYXBwLnNldFRyYW5zaXRpb25zID0gX2FwcC4kb3B0aW9ucy5udXh0LnNldFRyYW5zaXRpb25zLmJpbmQoX2FwcCk7CiAgICAgICAgICBpZiAoQ29tcG9uZW50cy5sZW5ndGgpIHsKICAgICAgICAgICAgX2FwcC5zZXRUcmFuc2l0aW9ucyhtYXBUcmFuc2l0aW9ucyhDb21wb25lbnRzLCByb3V0ZXIuY3VycmVudFJvdXRlKSk7CiAgICAgICAgICAgIF9sYXN0UGF0aHMgPSByb3V0ZXIuY3VycmVudFJvdXRlLm1hdGNoZWQubWFwKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgICAgICAgICAgIHJldHVybiBjb21waWxlKHJvdXRlLnBhdGgpKHJvdXRlci5jdXJyZW50Um91dGUucGFyYW1zKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gSW5pdGlhbGl6ZSBlcnJvciBoYW5kbGVyCiAgICAgICAgICBfYXBwLiRsb2FkaW5nID0ge307IC8vIFRvIGF2b2lkIGVycm9yIHdoaWxlIF9hcHAuJG51eHQgZG9lcyBub3QgZXhpc3QKICAgICAgICAgIGlmIChOVVhULmVycm9yKSB7CiAgICAgICAgICAgIF9hcHAuZXJyb3IoTlVYVC5lcnJvcik7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gQWRkIGJlZm9yZUVhY2ggcm91dGVyIGhvb2tzCiAgICAgICAgICByb3V0ZXIuYmVmb3JlRWFjaChsb2FkQXN5bmNDb21wb25lbnRzLmJpbmQoX2FwcCkpOwogICAgICAgICAgcm91dGVyLmJlZm9yZUVhY2gocmVuZGVyLmJpbmQoX2FwcCkpOwoKICAgICAgICAgIC8vIEZpeCBpbiBzdGF0aWM6IHJlbW92ZSB0cmFpbGluZyBzbGFzaCB0byBmb3JjZSBoeWRyYXRpb24KICAgICAgICAgIC8vIEZ1bGwgc3RhdGljLCBpZiBzZXJ2ZXItcmVuZGVyZWQ6IGh5ZHJhdGUsIHRvIGFsbG93IGN1c3RvbSByZWRpcmVjdCB0byBnZW5lcmF0ZWQgcGFnZQogICAgICAgICAgaWYgKCFOVVhULnNlcnZlclJlbmRlcmVkKSB7CiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIG1vdW50KCkpOwogICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAvLyBGaXJzdCByZW5kZXIgb24gY2xpZW50LXNpZGUKICAgICAgICAgIGNsaWVudEZpcnN0TW91bnQgPSBmdW5jdGlvbiBjbGllbnRGaXJzdE1vdW50KCkgewogICAgICAgICAgICBub3JtYWxpemVDb21wb25lbnRzKHJvdXRlci5jdXJyZW50Um91dGUsIHJvdXRlci5jdXJyZW50Um91dGUpOwogICAgICAgICAgICBzZXRMYXlvdXRGb3JOZXh0UGFnZS5jYWxsKF9hcHAsIHJvdXRlci5jdXJyZW50Um91dGUpOwogICAgICAgICAgICBjaGVja0ZvckVycm9ycyhfYXBwKTsKICAgICAgICAgICAgLy8gRG9uJ3QgY2FsbCBmaXhQcmVwYXRjaC5jYWxsKF9hcHAsIHJvdXRlci5jdXJyZW50Um91dGUsIHJvdXRlci5jdXJyZW50Um91dGUpIHNpbmNlIGl0J3MgZmlyc3QgcmVuZGVyCiAgICAgICAgICAgIG1vdW50KCk7CiAgICAgICAgICB9OyAvLyBmaXg6IGZvcmNlIG5leHQgdGljayB0byBhdm9pZCBoYXZpbmcgc2FtZSB0aW1lc3RhbXAgd2hlbiBhbiBlcnJvciBoYXBwZW4gb24gc3BhIGZhbGxiYWNrCiAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDMyOwogICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KHJlc29sdmUsIDApOwogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSAzMjoKICAgICAgICAgIHJlbmRlci5jYWxsKF9hcHAsIHJvdXRlci5jdXJyZW50Um91dGUsIHJvdXRlci5jdXJyZW50Um91dGUsIGZ1bmN0aW9uIChwYXRoKSB7CiAgICAgICAgICAgIC8vIElmIG5vdCByZWRpcmVjdGVkCiAgICAgICAgICAgIGlmICghcGF0aCkgewogICAgICAgICAgICAgIGNsaWVudEZpcnN0TW91bnQoKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEFkZCBhIG9uZS10aW1lIGFmdGVyRWFjaCBob29rIHRvCiAgICAgICAgICAgIC8vIG1vdW50IHRoZSBhcHAgd2FpdCBmb3IgcmVkaXJlY3QgYW5kIHJvdXRlIGdldHMgcmVzb2x2ZWQKICAgICAgICAgICAgdmFyIHVucmVnaXN0ZXJIb29rID0gcm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAodG8sIGZyb20pIHsKICAgICAgICAgICAgICB1bnJlZ2lzdGVySG9vaygpOwogICAgICAgICAgICAgIGNsaWVudEZpcnN0TW91bnQoKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAvLyBQdXNoIHRoZSBwYXRoIGFuZCBsZXQgcm91dGUgdG8gYmUgcmVzb2x2ZWQKICAgICAgICAgICAgcm91dGVyLnB1c2gocGF0aCwgdW5kZWZpbmVkLCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyKGVycik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgMzM6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICB9CiAgICB9LCBfY2FsbGVlNSwgbnVsbCwgW1s0LCAxMV1dKTsKICB9KSk7CiAgcmV0dXJuIF9tb3VudEFwcC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9"},null]}