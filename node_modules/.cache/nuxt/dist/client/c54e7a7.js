(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{271:function(L,q,C){var j=C(274);function M(m,w,S){return w=j(w),w in m?Object.defineProperty(m,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):m[w]=S,m}L.exports=M,L.exports.__esModule=!0,L.exports.default=L.exports},272:function(L,q){function C(j){return L.exports=C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},L.exports.__esModule=!0,L.exports.default=L.exports,C(j)}L.exports=C,L.exports.__esModule=!0,L.exports.default=L.exports},274:function(L,q,C){var j=C(272).default,M=C(276);function m(w){var S=M(w,"string");return j(S)==="symbol"?S:String(S)}L.exports=m,L.exports.__esModule=!0,L.exports.default=L.exports},276:function(L,q,C){var j=C(272).default;function M(m,w){if(j(m)!=="object"||m===null)return m;var S=m[Symbol.toPrimitive];if(S!==void 0){var P=S.call(m,w||"default");if(j(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(m)}L.exports=M,L.exports.__esModule=!0,L.exports.default=L.exports},282:function(L,q,C){"use strict";var j=C(31),M=C(82),m=C(39);L.exports=function(S){for(var P=j(this),s=m(P),_=arguments.length,g=M(_>1?arguments[1]:void 0,s),O=_>2?arguments[2]:void 0,N=O===void 0?s:M(O,s);N>g;)P[g++]=S;return P}},432:function(L,q,C){var j=C(433),M=C(272),m=C(434),w=C(435),S=C(271);C(45);function P(I,h){var n=typeof Symbol!="undefined"&&I[Symbol.iterator]||I["@@iterator"];if(!n){if(Array.isArray(I)||(n=s(I))||h&&I&&typeof I.length=="number"){n&&(I=n);var d=0,x=function(){};return{s:x,n:function(){return d>=I.length?{done:!0}:{done:!1,value:I[d++]}},e:function(X){throw X},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y=!0,e=!1,K;return{s:function(){n=n.call(I)},n:function(){var X=n.next();return y=X.done,X},e:function(X){e=!0,K=X},f:function(){try{!y&&n.return!=null&&n.return()}finally{if(e)throw K}}}}function s(I,h){if(!!I){if(typeof I=="string")return _(I,h);var n=Object.prototype.toString.call(I).slice(8,-1);if(n==="Object"&&I.constructor&&(n=I.constructor.name),n==="Map"||n==="Set")return Array.from(I);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(I,h)}}function _(I,h){(h==null||h>I.length)&&(h=I.length);for(var n=0,d=new Array(h);n<h;n++)d[n]=I[n];return d}C(10),C(21),C(22),C(49),C(76),C(37),C(147),C(436),C(437),C(52),C(40),C(27),C(51),C(32),C(36),C(20),C(53),C(54),C(33);var g=function(h){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(h).filter(function(d){return n.includes(d)}).reduce(function(d,x){return Object.assign(d,S({},x,h[x]))},{})},O=function(h){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(h).filter(function(d){return!n.includes(d)}).reduce(function(d,x){return Object.assign(d,S({},x,h[x]))},{})},N=function(){"use strict";function I(h,n){var d=h.query,x=h.path,y=h.init,e=h.text,K=h.postprocess,$=K===void 0?[]:K;m(this,I),this.query=d,this.path=x,this.init=y,this.postprocess=$,this.options=n||{},this.onlyKeys=null,this.withoutKeys=null,this.sortKeys=[],this.limitN=null,this.skipN=null,e||this.postprocess.unshift(function(X){return X.map(function(Y){return O(Y,["text"])})})}return w(I,[{key:"only",value:function(n){return this.onlyKeys=Array.isArray(n)?n:[n],this}},{key:"without",value:function(n){return this.withoutKeys=Array.isArray(n)?n:[n],this}},{key:"sortBy",value:function(n,d){return this.sortKeys.push([n,d==="desc"]),this}},{key:"where",value:function(n){return this.query=this.query.find(n),this}},{key:"search",value:function(n,d){if(!n)return this;var x;return M(n)==="object"?x=n:d?x={query:{type:"match",field:n,value:d,prefix_length:1,fuzziness:1,extended:!0,minimum_should_match:1}}:x={query:{type:"bool",should:this.options.fullTextSearchFields.map(function(y){return{type:"match",field:y,value:n,prefix_length:1,operator:"and",minimum_should_match:1,fuzziness:1,extended:!0}})}},this.query=this.query.find({$fts:x}).sortByScoring(),this}},{key:"surround",value:function(n){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=d.before,y=x===void 0?1:x,e=d.after,K=e===void 0?1:e,$=n.indexOf("/")===0?"path":"slug";this.onlyKeys&&this.onlyKeys.push($),this.withoutKeys&&(this.withoutKeys=this.withoutKeys.filter(function(Y){return Y!==$}));var X=function(k){var t=k.findIndex(function(V){return V[$]===n}),i=new Array(y+K).fill(null,0);if(t===-1)return i;for(var r=k.slice(t-y,t),f=k.slice(t+1,t+1+K),u=0,v=y-1;v>=0;v--)i[v]=r[u]||null,u++;for(var D=0,F=y;F<=K;F++)i[F]=f[D]||null,D++;return i};return this.postprocess.push(X),this}},{key:"limit",value:function(n){return typeof n=="string"&&(n=parseInt(n)),this.limitN=n,this}},{key:"skip",value:function(n){return typeof n=="string"&&(n=parseInt(n)),this.skipN=n,this}},{key:"fetch",value:function(){var h=j(regeneratorRuntime.mark(function d(){var x=this,y,e,K,$,X,Y;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.sortKeys&&this.sortKeys.length&&(this.query=this.query.compoundsort(this.sortKeys)),this.skipN&&(this.query=this.query.offset(this.skipN)),this.limitN&&(this.query=this.query.limit(this.limitN)),y=this.query.data({removeMeta:!0}),this.onlyKeys&&(this.options.watch&&this.onlyKeys.push("path","extension"),e=function(r){return r.map(function(f){return g(f,x.onlyKeys)})},this.postprocess.unshift(e)),this.withoutKeys&&(this.options.watch&&(this.withoutKeys=this.withoutKeys.filter(function(i){return!["path","extension"].includes(i)})),K=function(r){return r.map(function(f){return O(f,x.withoutKeys)})},this.postprocess.unshift(K)),$=P(this.postprocess);try{for($.s();!(X=$.n()).done;)Y=X.value,y=Y(y)}catch(i){$.e(i)}finally{$.f()}if(y){t.next=10;break}throw new Error("".concat(this.path," not found"));case 10:return t.abrupt("return",JSON.parse(JSON.stringify(y)));case 11:case"end":return t.stop()}},d,this)}));function n(){return h.apply(this,arguments)}return n}()}]),I}();L.exports=N},433:function(L,q){function C(M,m,w,S,P,s,_){try{var g=M[s](_),O=g.value}catch(N){w(N);return}g.done?m(O):Promise.resolve(O).then(S,P)}function j(M){return function(){var m=this,w=arguments;return new Promise(function(S,P){var s=M.apply(m,w);function _(O){C(s,S,P,_,g,"next",O)}function g(O){C(s,S,P,_,g,"throw",O)}_(void 0)})}}L.exports=j,L.exports.__esModule=!0,L.exports.default=L.exports},434:function(L,q){function C(j,M){if(!(j instanceof M))throw new TypeError("Cannot call a class as a function")}L.exports=C,L.exports.__esModule=!0,L.exports.default=L.exports},435:function(L,q,C){var j=C(274);function M(w,S){for(var P=0;P<S.length;P++){var s=S[P];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(w,j(s.key),s)}}function m(w,S,P){return S&&M(w.prototype,S),P&&M(w,P),Object.defineProperty(w,"prototype",{writable:!1}),w}L.exports=m,L.exports.__esModule=!0,L.exports.default=L.exports},436:function(L,q,C){"use strict";var j=C(5),M=C(67).findIndex,m=C(111),w="findIndex",S=!0;w in[]&&Array(1)[w](function(){S=!1}),j({target:"Array",proto:!0,forced:S},{findIndex:function(s){return M(this,s,arguments.length>1?arguments[1]:void 0)}}),m(w)},437:function(L,q,C){var j=C(5),M=C(282),m=C(111);j({target:"Array",proto:!0},{fill:M}),m("fill")},438:function(L,q,C){(function(M,m){L.exports=m()})(typeof self!="undefined"?self:this,function(){return function(j){var M={};function m(w){if(M[w])return M[w].exports;var S=M[w]={i:w,l:!1,exports:{}};return j[w].call(S.exports,S,S.exports,m),S.l=!0,S.exports}return m.m=j,m.c=M,m.d=function(w,S,P){m.o(w,S)||Object.defineProperty(w,S,{enumerable:!0,get:P})},m.r=function(w){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})},m.t=function(w,S){if(S&1&&(w=m(w)),S&8||S&4&&typeof w=="object"&&w&&w.__esModule)return w;var P=Object.create(null);if(m.r(P),Object.defineProperty(P,"default",{enumerable:!0,value:w}),S&2&&typeof w!="string")for(var s in w)m.d(P,s,function(_){return w[_]}.bind(null,s));return P},m.n=function(w){var S=w&&w.__esModule?function(){return w.default}:function(){return w};return m.d(S,"a",S),S},m.o=function(w,S){return Object.prototype.hasOwnProperty.call(w,S)},m.p="",m(m.s=8)}([function(j,M,m){"use strict";m.d(M,"a",function(){return S});var w=m(2);let S={js:P(),"abstract-js":s(),"abstract-date":_(),loki:g()};function P(){return(O,N)=>O===N?0:O<N?-1:1}function s(){return(O,N)=>O==N?0:O<N?-1:1}function _(){return(O,N)=>{let I=new Date(O).toISOString(),h=new Date(N).toISOString();return I==h?0:I<h?-1:1}}function g(){return(O,N)=>Object(w.b)(O,N)?0:Object(w.c)(O,N,!1)?-1:1}},function(j,M,m){"use strict";(function(w){m.d(M,"a",function(){return s});function S(){let _;return function(g){_=g}(w!==void 0&&w||this),_}function P(){const _=S(),g=Symbol.for("LOKI");return _[g]===void 0&&(_[g]={}),_[g]}const s=P()}).call(this,m(7))},function(j,M,m){"use strict";m.d(M,"b",function(){return w}),m.d(M,"c",function(){return S}),m.d(M,"d",function(){return s}),m.d(M,"a",function(){return N});function w(I,h){if(I===h)return!0;if(!I||!h||I===!0||h===!0||I!==I||h!==h){let x,y;switch(I){case void 0:x=1;break;case null:x=1;break;case!1:x=3;break;case!0:x=4;break;case"":x=5;break;default:x=I===I?9:0;break}switch(h){case void 0:y=1;break;case null:y=1;break;case!1:y=3;break;case!0:y=4;break;case"":y=5;break;default:y=h===h?9:0;break}if(x!==9||y!==9)return x===y}let n=Number(I),d=Number(h);return n===n||d===d?n===d:(n=I.toString(),d=h.toString(),n==d)}function S(I,h,n){if(!I||!h||I===!0||h===!0||I!==I||h!==h){let y,e;switch(I){case void 0:y=1;break;case null:y=1;break;case!1:y=3;break;case!0:y=4;break;case"":y=5;break;default:y=I===I?9:0;break}switch(h){case void 0:e=1;break;case null:e=1;break;case!1:e=3;break;case!0:e=4;break;case"":e=5;break;default:e=h===h?9:0;break}if(y!==9||e!==9)return y===e?n:y<e}let d=Number(I),x=Number(h);return d===d&&x===x?d<x?!0:d>x?!1:n:d===d&&x!==x?!0:x===x&&d!==d?!1:I<h?!0:I>h?!1:I==h?n:(d=I.toString(),x=h.toString(),d<x?!0:d==x?n:!1)}function P(I,h,n){if(!I||!h||I===!0||h===!0||I!==I||h!==h){let y,e;switch(I){case void 0:y=1;break;case null:y=1;break;case!1:y=3;break;case!0:y=4;break;case"":y=5;break;default:y=I===I?9:0;break}switch(h){case void 0:e=1;break;case null:e=1;break;case!1:e=3;break;case!0:e=4;break;case"":e=5;break;default:e=h===h?9:0;break}if(y!==9||e!==9)return y===e?n:y>e}let d=Number(I),x=Number(h);return d===d&&x===x?d>x?!0:d<x?!1:n:d===d&&x!==x?!1:x===x&&d!==d||I>h?!0:I<h?!1:I==h?n:(d=I.toString(),x=h.toString(),d>x?!0:d==x?n:!1)}function s(I,h,n){return w(I,h)?0:S(I,h,!1)?n?1:-1:P(I,h,!1)?n?-1:1:0}class _{$eq(h,n){return h===n}$ne(h,n){return h!==n}$gt(h,n){return h>n}$gte(h,n){return h>=n}$lt(h,n){return h<n}$lte(h,n){return h<=n}$between(h,n){return h==null?!1:h>=n[0]&&h<=n[1]}$in(h,n){return n.indexOf(h)!==-1}$nin(h,n){return n.indexOf(h)===-1}$keyin(h,n){return h in n}$nkeyin(h,n){return!(h in n)}$definedin(h,n){return n[h]!==void 0}$undefinedin(h,n){return n[h]===void 0}$regex(h,n){return n.test(h)}$containsNone(h,n){return!this.$containsAny(h,n)}$containsAny(h,n){const d=this.containsCheckFn(h);return d!==null?Array.isArray(n)?n.some(d):d(n):!1}$contains(h,n){const d=this.containsCheckFn(h);return d!==null?Array.isArray(n)?n.every(d):d(n):!1}$type(h,n){let d=typeof h;return d==="object"&&(Array.isArray(h)?d="array":h instanceof Date&&(d="date")),typeof n!="object"?d===n:this.doQueryOp(d,n)}$finite(h,n){return n===isFinite(h)}$size(h,n){return Array.isArray(h)?typeof n!="object"?h.length===n:this.doQueryOp(h.length,n):!1}$len(h,n){return typeof h=="string"?typeof n!="object"?h.length===n:this.doQueryOp(h.length,n):!1}$where(h,n){return n(h)===!0}$not(h,n){return!this.doQueryOp(h,n)}$and(h,n){for(let d=0,x=n.length;d<x;d++)if(!this.doQueryOp(h,n[d]))return!1;return!0}$or(h,n){for(let d=0,x=n.length;d<x;d++)if(this.doQueryOp(h,n[d]))return!0;return!1}doQueryOp(h,n){for(let d in n)if(Object.hasOwnProperty.call(n,d))return this[d](h,n[d]);return!1}containsCheckFn(h){return typeof h=="string"||Array.isArray(h)?n=>h.indexOf(n)!==-1:typeof h=="object"&&h!==null?n=>Object.hasOwnProperty.call(h,n):null}}class g extends _{constructor(){super()}$eq(h,n){return w(h,n)}$ne(h,n){return!w(h,n)}$gt(h,n){return P(h,n,!1)}$gte(h,n){return P(h,n,!0)}$lt(h,n){return S(h,n,!1)}$lte(h,n){return S(h,n,!0)}$between(h,n){return h==null?!1:P(h,n[0],!0)&&S(h,n[1],!0)}}class O extends _{constructor(h){super();this.comparator=h}$eq(h,n){return this.comparator(h,n)===0}$ne(h,n){return this.comparator(h,n)!==0}$gt(h,n){return this.comparator(h,n)===1}$gte(h,n){return this.comparator(h,n)>-1}$lt(h,n){return this.comparator(h,n)===-1}$lte(h,n){return this.comparator(h,n)<1}$between(h,n){return h==null?!1:this.comparator(h,n[0])>-1&&this.comparator(h,n[1])<1}}let N={js:new _,loki:new g}},function(j,M,m){"use strict";var w=m(5);class S{constructor(t){this._field=t,this._lokiMap={},this._valMap={}}set(t,i){if(i!=null){if(i in this._lokiMap)throw new Error("Duplicate key for property "+this._field+": "+i);if(t in this._valMap)throw new Error("Duplicate key for property $loki : "+t);this._lokiMap[i]=t,this._valMap[t]=i}}get(t){return this._lokiMap[t]}update(t,i){if(i!==this._valMap[t]){if(i in this._lokiMap)throw new Error("Duplicate key for property "+this._field+": "+i);this.remove(t),this.set(t,i)}}remove(t){if(!(t in this._valMap))throw new Error("Key is not in unique index: "+this._field);let i=this._valMap[t];delete this._lokiMap[i],delete this._valMap[t]}clear(){this._lokiMap={},this._valMap={}}}function P(k,t,i){if(k instanceof Array)return k.push(i),k[k.length-1];if(k instanceof Object)return k[t]=i,k[t]}function s(k,t){for(let i in k){let r=k[i];if(r instanceof Date){let f=new Date(r.getTime());P(t,i,f)}else if(r instanceof Function)P(t,i,r);else if(r instanceof Array){let u=P(t,i,[]);s(r,u)}else if(r instanceof Object){let u=P(t,i,{});s(r,u)}else P(t,i,r)}}function _(k){if(/number|string|boolean/.test(typeof k))return k;if(k instanceof Date)return new Date(k.getTime());const t=k instanceof Array?[]:{};return s(k,t),t}function g(k,t="parse-stringify"){if(k==null)return null;let i;switch(t){case"parse-stringify":i=JSON.parse(JSON.stringify(k));break;case"deep":i=_(k);break;case"shallow":i=Object.create(k.constructor.prototype),Object.assign(i,k);break;case"shallow-recurse":i=g(k,"shallow");const r=Object.keys(k);for(let f=0;f<r.length;f++){const u=r[f];typeof k[u]=="object"&&k[u].constructor.name==="Object"&&(i[u]=g(k[u],"shallow-recurse"))}break;default:break}return i}var O=m(2),N=m(0);function I(k,t,i=0){if(++i>=10)return k;for(const r in k)if(typeof k[r]=="string"&&k[r].indexOf("[%lktxp]")===0){const f=k[r].substring(8);t[f]!==void 0&&(k[r]=t[f])}else typeof k[r]=="object"&&(k[r]=I(k[r],t,i));return k}function h(k,t){if(t===void 0)return k;const i=[];for(let r=0;r<k.length;r++){const f=g(k[r],"shallow-recurse");i.push(I(f,t))}return i}const n={$eq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};class d{constructor(t){this._filteredRows=[],this._filterInitialized=!1,this._scoring=null,this._collection=t}reset(){return this._filteredRows.length>0&&(this._filteredRows=[]),this._filterInitialized=!1,this}toJSON(){const t=this.copy();return t._collection=null,t}limit(t){return!this._filterInitialized&&this._filteredRows.length===0&&(this._filteredRows=this._collection._prepareFullDocIndex()),this._filteredRows=this._filteredRows.slice(0,t),this._filterInitialized=!0,this}offset(t){return!this._filterInitialized&&this._filteredRows.length===0&&(this._filteredRows=this._collection._prepareFullDocIndex()),this._filteredRows=this._filteredRows.slice(t),this._filterInitialized=!0,this}copy(){const t=new d(this._collection);return t._filteredRows=this._filteredRows.slice(),t._filterInitialized=this._filterInitialized,t}transform(t,i){typeof t=="string"&&(t=this._collection._transforms[t]),i!==void 0&&(t=h(t,i));let r=this;for(let f=0;f<t.length;f++){const u=t[f];switch(u.type){case"find":r.find(u.value);break;case"where":r.where(u.value);break;case"simplesort":r.simplesort(u.property,u.options);break;case"compoundsort":r.compoundsort(u.value);break;case"sort":r.sort(u.value);break;case"sortByScoring":r.sortByScoring(u.desc);break;case"limit":r=r.limit(u.value);break;case"offset":r=r.offset(u.value);break;case"map":r=r.map(u.value,u.dataOptions);break;case"eqJoin":r=r.eqJoin(u.joinData,u.leftJoinKey,u.rightJoinKey,u.mapFun,u.dataOptions);break;case"mapReduce":r=r.mapReduce(u.mapFunction,u.reduceFunction);break;case"update":r.update(u.value);break;case"remove":r.remove();break;default:break}}return r}sort(t){!this._filterInitialized&&this._filteredRows.length===0&&(this._filteredRows=this._collection._prepareFullDocIndex());const i=this._collection._data,r=(f,u)=>t(i[f],i[u]);return this._filteredRows.sort(r),this}simplesort(t,i={desc:!1}){if(typeof i=="boolean"&&(i={desc:i}),!this._filterInitialized&&this._collection._rangedIndexes.hasOwnProperty(t)){let v=this._collection._rangedIndexes[t].index.rangeRequest(),D=[];for(let F of v)D.push(this._collection.get(F,!0)[1]);return this._filteredRows=i.desc?D.reverse():D,this._filterInitialized=!0,this}!this._filterInitialized&&this._filteredRows.length===0&&(this._filteredRows=this._collection._prepareFullDocIndex());const r=this._collection._data;let f=i.sortComparator?N.a[i.sortComparator]:N.a[this._collection._unindexedSortComparator];const u=(v,D)=>f(r[v][t],r[D][t]);return this._filteredRows.sort(u),i.desc&&this._filteredRows.reverse(),this}compoundsort(t){if(t.length===0)throw new Error("Invalid call to compoundsort, need at least one property");if(t.length===1){const f=t[0];return typeof f=="string"?this.simplesort(f,!1):this.simplesort(f[0],f[1])}for(let f=0,u=t.length;f<u;f++){const v=t[f];typeof v=="string"&&(t[f]=[v,!1])}!this._filterInitialized&&this._filteredRows.length===0&&(this._filteredRows=this._collection._prepareFullDocIndex());const i=this._collection._data,r=(f,u)=>this._compoundeval(t,i[f],i[u]);return this._filteredRows.sort(r),this}_compoundeval(t,i,r){for(let f=0,u=t.length;f<u;f++){const v=t[f],D=v[0],F=Object(O.d)(i[D],r[D],v[1]);if(F!==0)return F}return 0}sortByScoring(t=!1){if(this._scoring===null)throw new Error("No scoring available");return t?this._filteredRows.sort((i,r)=>this._scoring[i].score-this._scoring[r].score):this._filteredRows.sort((i,r)=>this._scoring[r].score-this._scoring[i].score),this}getScoring(){if(this._scoring===null)throw new Error("No scoring available");const t=[];for(let i=0;i<this._filteredRows.length;i++)t.push(this._scoring[this._filteredRows[i]]);return t}findOr(t){const i=[],r=[],f=this.count();for(let u=0,v=t.length;u<v;u++){const D=this.copy().find(t[u])._filteredRows,F=D.length;if(F===f)return this;for(let V=0;V<F;V++){const H=D[V];r[H]===void 0&&(r[H]=!0,i.push(H))}}return this._filteredRows=i,this._filterInitialized=!0,this}$or(t){return this.findOr(t)}findAnd(t){for(let i=0,r=t.length;i<r;i++){if(this.count()===0)return this;this.find(t[i])}return this}$and(t){return this.findAnd(t)}find(t,i=!1){if(this._collection._data.length===0)return this._filteredRows=[],this._filterInitialized=!0,this;const r=t||"getAll";let f,u,v;if(typeof r=="object"){let B=[];for(let J in r){let U={};U[J]=r[J],B.push(U),r[J]!==void 0&&(f=J,u=r[J])}if(B.length>1)return this.find({$and:B},i)}if(!f||r==="getAll")return i&&(this._filteredRows=this._collection._data.length>0?[0]:[],this._filterInitialized=!0),this;if(f==="$and"||f==="$or")return this[f](u),i&&this._filteredRows.length>1&&(this._filteredRows=this._filteredRows.slice(0,1)),this;let D="";if(u===null||typeof u!="object"||u instanceof Date)D="$eq",v=u;else if(typeof u=="object"){for(let B in u)if(u[B]!==void 0){D=B,v=u[B];break}}else throw new Error("Do not know what you want to do.");D==="$regex"&&(Array.isArray(v)?v=new RegExp(v[0],v[1]):v instanceof RegExp||(v=new RegExp(v)));const F=!this._filterInitialized;let V=!1;F&&this._collection._rangedIndexes[f]&&n[D]&&(V=!0);const H=O.a[this._collection._defaultLokiOperatorPackage],ne=this._collection._data;let Z=[];if(this._filterInitialized){let B=this._filteredRows;if(f==="$fts"){this._scoring=this._collection._fullTextSearch.search(r.$fts);let J=Object.keys(this._scoring);for(let U=0;U<J.length;U++)B.indexOf(+J[U])!==-1&&Z.push(+J[U])}else if(this._collection._constraints.unique[f]!==void 0&&D==="$eq"){const J=this._collection._constraints.unique[f].get(v);if(J!==void 0){const U=this._collection.get(J,!0)[1];B.indexOf(U)!==-1&&Z.push(U)}}else for(let J=0;J<B.length;J++){let U=B[J];H[D](ne[U][f],v)&&Z.push(U)}return this._filteredRows=Z,this._filterInitialized=!0,this}if(this._filteredRows=Z,this._filterInitialized=!0,f==="$fts"){this._scoring=this._collection._fullTextSearch.search(r.$fts);let B=Object.keys(this._scoring);for(let J=0;J<B.length;J++)Z.push(+B[J]);return this}if(this._collection._constraints.unique[f]!==void 0&&D==="$eq"){const B=this._collection._constraints.unique[f].get(v);return B!==void 0&&Z.push(this._collection.get(B,!0)[1]),this}if(!V){for(let B=0;B<ne.length;B++)if(H[D](ne[B][f],v)&&(Z.push(B),i))return this;return this}if(this._collection._rangedIndexes[f]){if(D==="$in"){let J=this._collection._rangedIndexes[f];for(let U of v){let fe=J.index.rangeRequest({op:"$eq",val:U});for(let le of fe)Z.push(this._collection.get(le,!0)[1])}return this}if(D==="$between"){let J=this._collection._rangedIndexes[f].index.rangeRequest({op:D,val:v[0],high:v[1]});for(let U of J)Z.push(this._collection.get(U,!0)[1]);return this}let B=this._collection._rangedIndexes[f].index.rangeRequest({op:D,val:v});if(n[D]!==!0)for(let J of B){let U=this._collection.get(J,!0)[1];n[D](ne[U][f],v)&&Z.push(U)}else for(let J of B)Z.push(this._collection.get(J,!0)[1])}return this}where(t){let i,r=[];if(typeof t=="function")i=t;else throw new TypeError("Argument is not a stored view or a function");if(this._filterInitialized){let f=this._filteredRows.length;for(;f--;)i(this._collection._data[this._filteredRows[f]])===!0&&r.push(this._filteredRows[f]);return this._filteredRows=r,this}else{let f=this._collection._data.length;for(;f--;)i(this._collection._data[f])===!0&&r.push(f);return this._filteredRows=r,this._filterInitialized=!0,this}}count(){return this._filterInitialized?this._filteredRows.length:this._collection.count()}data(t={}){let i,r,f;({forceClones:i=!1,forceCloneMethod:r=this._collection._cloneMethod,removeMeta:f=!1}=t);let u=[],v=this._collection._data,D,F;if(f&&!i&&(i=!0,r="shallow"),this._collection._disableDeltaChangesApi||(i=!0,r="deep"),!this._filterInitialized)if(this._filteredRows.length===0)if(this._collection._cloneObjects||i){F=r;for(let H=0;H<v.length;H++)D=this._collection._defineNestedProperties(g(v[H],F)),f&&(delete D.$loki,delete D.meta),u.push(D);return u}else return v.slice();else this._filterInitialized=!0;const V=this._filteredRows;if(this._collection._cloneObjects||i){F=r;for(let H=0;H<V.length;H++)D=this._collection._defineNestedProperties(g(v[V[H]],F)),f&&(delete D.$loki,delete D.meta),u.push(D)}else for(let H=0;H<V.length;H++)u.push(v[V[H]]);return u}update(t){!this._filterInitialized&&this._filteredRows.length===0&&(this._filteredRows=this._collection._prepareFullDocIndex());const i=this._filteredRows.length,r=this._collection._data;for(let f=0;f<i;f++)if(this._collection._cloneObjects||!this._collection._disableDeltaChangesApi){const u=g(r[this._filteredRows[f]],this._collection._cloneMethod);t(u),this._collection.update(u)}else t(r[this._filteredRows[f]]),this._collection.update(r[this._filteredRows[f]]);return this}remove(){return!this._filterInitialized&&this._filteredRows.length===0&&(this._filteredRows=this._collection._prepareFullDocIndex()),this._collection.remove(this.data()),this._filteredRows=[],this}mapReduce(t,i){try{return i(this.data().map(t))}catch(r){throw r}}eqJoin(t,i,r,f,u){let v=[],D,F,V=[],H=typeof i=="function",ne=typeof r=="function",Z={},B=this.data(u),J=B.length;if(t instanceof Y)v=t.chain().data(u);else if(t instanceof d)v=t.data(u);else if(Array.isArray(t))v=t;else throw new TypeError("joinData needs to be an array or result set");D=v.length;for(let U=0;U<D;U++)F=ne?r(v[U]):v[U][r],Z[F]=v[U];f||(f=(U,fe)=>({left:U,right:fe}));for(let U=0;U<J;U++)F=H?i(B[U]):B[U][i],V.push(f(B[U],Z[F]||{}));return this._collection=new Y("joinData"),this._collection.insert(V),this._filteredRows=[],this._filterInitialized=!1,this}map(t,i){const r=this.data(i).map(t);return this._collection=new Y("mappedData"),this._collection.insert(r),this._filteredRows=[],this._filterInitialized=!1,this}}class x extends w.a{constructor(t,i,r={}){super();this._rebuildPending=!1,this._resultData=[],this._resultDirty=!1,this._cachedResultSet=null,this._filterPipeline=[],this._sortFunction=null,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=null,this._sortDirty=!1,{persistent:this._persistent=!1,sortPriority:this._sortPriority="passive",minRebuildInterval:this._minRebuildInterval=1}=r,this._collection=t,this.name=i,this._resultSet=new d(t),this._events={rebuild:[]}}_rematerialize({removeWhereFilters:t=!1}){if(this._resultData=[],this._resultDirty=!0,this._resultSet=new d(this._collection),(this._sortFunction||this._sortCriteria||this._sortCriteriaSimple||this._sortByScoring!==null)&&(this._sortDirty=!0),t){let r=this._filterPipeline.length;for(;r--;)this._filterPipeline[r].type==="where"&&(r!==this._filterPipeline.length-1&&(this._filterPipeline[r]=this._filterPipeline[this._filterPipeline.length-1]),this._filterPipeline.length--)}const i=this._filterPipeline;this._filterPipeline=[];for(let r=0;r<i.length;r++)this.applyFind(i[r].val);return this.data(),this.emit("rebuild",this),this}branchResultSet(t,i){const r=this._resultSet.copy();return t===void 0?r:r.transform(t,i)}toJSON(){return{name:this.name,_persistent:this._persistent,_sortPriority:this._sortPriority,_minRebuildInterval:this._minRebuildInterval,_resultSet:this._resultSet,_filterPipeline:this._filterPipeline,_sortCriteria:this._sortCriteria,_sortCriteriaSimple:this._sortCriteriaSimple,_sortByScoring:this._sortByScoring,_sortDirty:this._sortDirty}}static fromJSONObject(t,i){let r=new x(t,i.name);return r._resultDirty=!0,r._filterPipeline=i._filterPipeline,r._resultData=[],r._sortCriteria=i._sortCriteria,r._sortCriteriaSimple=i._sortCriteriaSimple,r._sortByScoring=i._sortByScoring,r._sortDirty=i._sortDirty,r._resultSet._filteredRows=i._resultSet._filteredRows,r._resultSet._filterInitialized=i._resultSet._filterInitialized,r._rematerialize({removeWhereFilters:!0}),r}removeFilters({queueSortPhase:t=!1}={}){this._rebuildPending=!1,this._resultSet.reset(),this._resultData=[],this._resultDirty=!0,this._cachedResultSet=null,this._filterPipeline=[],this._sortFunction=null,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=null,this._sortDirty=!1,t===!0&&this._queueSortPhase()}applySort(t){return this._sortFunction=t,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=null,this._queueSortPhase(),this}applySimpleSort(t,i=!1){return this._sortCriteriaSimple={field:t,options:i},this._sortFunction=null,this._sortCriteria=null,this._sortByScoring=null,this._queueSortPhase(),this}applySortCriteria(t){return this._sortCriteria=t,this._sortCriteriaSimple=null,this._sortFunction=null,this._sortByScoring=null,this._queueSortPhase(),this}applySortByScoring(t=!1){return this._sortFunction=null,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=t,this._queueSortPhase(),this}getScoring(){return this._resultSet.getScoring()}startTransaction(){return this._cachedResultSet=this._resultSet.copy(),this}commit(){return this._cachedResultSet=null,this}rollback(){return this._resultSet=this._cachedResultSet,this._persistent&&(this._resultData=this._resultSet.data(),this.emit("rebuild",this)),this}_indexOfFilterWithId(t){if(typeof t=="string"||typeof t=="number"){for(let i=0,r=this._filterPipeline.length;i<r;i++)if(t===this._filterPipeline[i].uid)return i}return-1}_addFilter(t){this._filterPipeline.push(t),this._resultSet[t.type](t.val)}reapplyFilters(){this._resultSet.reset(),this._cachedResultSet=null,this._persistent&&(this._resultData=[],this._resultDirty=!0);const t=this._filterPipeline;this._filterPipeline=[];for(let i=0,r=t.length;i<r;i++)this._addFilter(t[i]);return this._sortFunction||this._sortCriteria||this._sortCriteriaSimple||this._sortByScoring!==null?this._queueSortPhase():this._queueRebuildEvent(),this}applyFilter(t){const i=this._indexOfFilterWithId(t.uid);return i>=0?(this._filterPipeline[i]=t,this.reapplyFilters()):(this._cachedResultSet=null,this._persistent&&(this._resultData=[],this._resultDirty=!0),this._addFilter(t),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple||this._sortByScoring!==null?this._queueSortPhase():this._queueRebuildEvent(),this)}applyFind(t,i=""){return this.applyFilter({type:"find",val:t,uid:i}),this}applyWhere(t,i){return this.applyFilter({type:"where",val:t,uid:i}),this}removeFilter(t){const i=this._indexOfFilterWithId(t);if(i<0)throw new Error("Dynamic view does not contain a filter with ID: "+t);return this._filterPipeline.splice(i,1),this.reapplyFilters(),this}count(){return this._resultDirty&&(this._resultData=this._resultSet.data()),this._resultSet.count()}data(t={}){return(this._sortDirty||this._resultDirty)&&this._performSortPhase({suppressRebuildEvent:!0}),this._persistent?this._resultData:this._resultSet.data(t)}_queueRebuildEvent(){this._rebuildPending||(this._rebuildPending=!0,setTimeout(()=>{this._rebuildPending&&(this._rebuildPending=!1,this.emit("rebuild",this))},this._minRebuildInterval))}_queueSortPhase(){this._sortDirty||(this._sortDirty=!0,this._sortPriority==="active"?setTimeout(()=>{this._performSortPhase()},this._minRebuildInterval):this._queueRebuildEvent())}_performSortPhase(t={}){!this._sortDirty&&!this._resultDirty||(this._sortDirty&&(this._sortFunction?this._resultSet.sort(this._sortFunction):this._sortCriteria?this._resultSet.compoundsort(this._sortCriteria):this._sortCriteriaSimple?this._resultSet.simplesort(this._sortCriteriaSimple.field,this._sortCriteriaSimple.options):this._sortByScoring!==null&&this._resultSet.sortByScoring(this._sortByScoring),this._sortDirty=!1),this._persistent&&(this._resultData=this._resultSet.data(),this._resultDirty=!1),t.suppressRebuildEvent||this.emit("rebuild",this))}_evaluateDocument(t,i){if(!this._resultSet._filterInitialized){this._persistent&&(this._resultData=this._resultSet.data()),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent();return}const r=this._resultSet._filteredRows,f=i?-1:r.indexOf(+t),u=r.length,v=new d(this._collection);v._filteredRows=[t],v._filterInitialized=!0;let D;for(let V=0,H=this._filterPipeline.length;V<H;V++)D=this._filterPipeline[V],v[D.type](D.val);const F=v._filteredRows.length===0?-1:0;if(!(f===-1&&F===-1)){if(f===-1&&F!==-1){r.push(t),this._persistent&&this._resultData.push(this._collection._data[t]),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent();return}if(f!==-1&&F===-1){f<u-1?(r.splice(f,1),this._persistent&&this._resultData.splice(f,1)):(r.length=u-1,this._persistent&&(this._resultData.length=u-1)),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent();return}f!==-1&&F!==-1&&(this._persistent&&(this._resultData[f]=this._collection._data[t]),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent())}}_removeDocument(t){if(!this._resultSet._filterInitialized){this._persistent&&(this._resultData=this._resultSet.data()),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent();return}const i=this._resultSet._filteredRows,r=i.indexOf(+t);let f=i.length;r!==-1&&(r<f-1?(i[r]=i[f-1],i.length=f-1,this._persistent&&(this._resultData[r]=this._resultData[f-1],this._resultData.length=f-1)):(i.length=f-1,this._persistent&&(this._resultData.length=f-1)),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent()),f=i.length;for(let u=0;u<f;u++)i[u]>t&&i[u]--}mapReduce(t,i){try{return i(this.data().map(t))}catch(r){throw r}}}var y=m(4),e=m(1);m.d(M,"a",function(){return Y});function K(k){return k.reduce((t,i)=>t+i,0)/k.length}function $(k){const t=K(k),i=k.map(f=>{const u=f-t;return u*u}),r=K(i);return Math.sqrt(r)}function X(k,t,i,r=0){if(k===void 0)return!1;if(r+1===t.length)return i.push(k[t[r]]),!1;const f=k[t[r]];if(Array.isArray(f)){for(let u=0;u<f.length;u++)X(f[u],t,i,r+1);return!0}else return X(f,t,i,r+1)}class Y extends w.a{constructor(t,i={}){super();if(this._data=[],this._idIndex=[],this._rangedIndexes={},this._lokimap={},this._unindexedSortComparator="js",this._defaultLokiOperatorPackage="js",this._constraints={unique:{}},this._transforms={},this._dirty=!0,this._cached=null,this._nestedProperties=[],this._ttl={age:null,ttlInterval:null,daemon:null},this._maxId=0,this._dynamicViews=[],this._changes=[],this._stages={},this._commitLog=[],i&&i.disableMeta===!0){if(i.disableChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(i.disableDeltaChangesApi===!1)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if(typeof i.ttl=="number"&&i.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}if(this.name=t,this._unindexedSortComparator=i.unindexedSortComparator||"js",this._defaultLokiOperatorPackage=i.defaultLokiOperatorPackage||"js",i.unique!==void 0&&(Array.isArray(i.unique)||(i.unique=[i.unique]),i.unique.forEach(f=>{this._constraints.unique[f]=new S(f)})),e.a.FullTextSearch!==void 0?this._fullTextSearch=i.fullTextSearch!==void 0?new e.a.FullTextSearch(i.fullTextSearch):null:this._fullTextSearch=null,this._transactional=i.transactional!==void 0?i.transactional:!1,this._cloneObjects=i.clone!==void 0?i.clone:!1,this._asyncListeners=i.asyncListeners!==void 0?i.asyncListeners:!1,this._disableMeta=i.disableMeta!==void 0?i.disableMeta:!1,this._disableChangesApi=i.disableChangesApi!==void 0?i.disableChangesApi:!0,this._disableDeltaChangesApi=i.disableDeltaChangesApi!==void 0?i.disableDeltaChangesApi:!0,this._cloneMethod=i.cloneMethod!==void 0?i.cloneMethod:"deep",this._disableChangesApi&&(this._disableDeltaChangesApi=!0),this._serializableIndexes=i.serializableIndexes!==void 0?i.serializableIndexes:!0,i.nestedProperties!=null)for(let f=0;f<i.nestedProperties.length;f++){const u=i.nestedProperties[f];typeof u=="string"?this._nestedProperties.push({name:u,path:u.split(".")}):this._nestedProperties.push(u)}this.setTTL(i.ttl||-1,i.ttlInterval),this._events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this._ensureId();let r=i.rangedIndexes||{};for(let f in r)this.ensureRangedIndex(f,r[f].indexTypeName,r[f].comparatorName);this.setChangesApi(this._disableChangesApi,this._disableDeltaChangesApi),this.flushChanges()}toJSON(){return{name:this.name,unindexedSortComparator:this._unindexedSortComparator,defaultLokiOperatorPackage:this._defaultLokiOperatorPackage,_dynamicViews:this._dynamicViews,uniqueNames:Object.keys(this._constraints.unique),transforms:this._transforms,rangedIndexes:this._rangedIndexes,_data:this._data,idIndex:this._idIndex,maxId:this._maxId,_dirty:this._dirty,_nestedProperties:this._nestedProperties,transactional:this._transactional,asyncListeners:this._asyncListeners,disableMeta:this._disableMeta,disableChangesApi:this._disableChangesApi,disableDeltaChangesApi:this._disableDeltaChangesApi,cloneObjects:this._cloneObjects,cloneMethod:this._cloneMethod,changes:this._changes,_fullTextSearch:this._fullTextSearch}}static fromJSONObject(t,i){let r=new Y(t.name,{disableChangesApi:t.disableChangesApi,disableDeltaChangesApi:t.disableDeltaChangesApi,unindexedSortComparator:t.unindexedSortComparator,defaultLokiOperatorPackage:t.defaultLokiOperatorPackage});r._transactional=t.transactional,r._asyncListeners=t.asyncListeners,r._disableMeta=t.disableMeta,r._disableChangesApi=t.disableChangesApi,r._cloneObjects=t.cloneObjects,r._cloneMethod=t.cloneMethod||"deep",r._changes=t.changes,r._nestedProperties=t._nestedProperties,r._rangedIndexes=t.rangedIndexes||{},r._dirty=i&&i.retainDirtyFlags===!0?t._dirty:!1;function f(u){const v=i[u.name];if(v.proto){const D=v.inflate||((F,V)=>{for(let H in F)V[H]=F[H]});return F=>{const V=new v.proto;return D(F,V),V}}return v.inflate}if(i&&i[t.name]!==void 0){let u=f(t);for(let v=0;v<t._data.length;v++)r._data[v]=r._defineNestedProperties(u(t._data[v])),r._lokimap[r._data[v].$loki]=r._data[v]}else for(let u=0;u<t._data.length;u++)r._data[u]=r._defineNestedProperties(t._data[u]),r._lokimap[r._data[u].$loki]=r._data[u];r._maxId=t.maxId===void 0?0:t.maxId,r._idIndex=t.idIndex,t.transforms!==void 0&&(r._transforms=t.transforms);for(let u in t.rangedIndexes){let v=t.rangedIndexes[u],D=y.a[v.indexTypeName],F=N.a[v.comparatorName],V=D(u,F);V.restore(v.index),r._rangedIndexes[u].index=V}if(r._ensureId(),t.uniqueNames!==void 0)for(let u=0;u<t.uniqueNames.length;u++)r.ensureUniqueIndex(t.uniqueNames[u]);if(t._dynamicViews!==void 0)for(let u=0;u<t._dynamicViews.length;u++)r._dynamicViews.push(x.fromJSONObject(r,t._dynamicViews[u]));return t._fullTextSearch&&(r._fullTextSearch=e.a.FullTextSearch.fromJSONObject(t._fullTextSearch,i.fullTextSearch)),r}addTransform(t,i){if(this._transforms[t]!==void 0)throw new Error("a transform by that name already exists");this._transforms[t]=i}getTransform(t){return this._transforms[t]}setTransform(t,i){this._transforms[t]=i}removeTransform(t){delete this._transforms[t]}setTTL(t,i){t<0?clearInterval(this._ttl.daemon):(this._ttl.age=t,this._ttl.ttlInterval=i,this._ttl.daemon=setInterval(()=>{const r=Date.now();this.chain().where(u=>{const v=u.meta.updated||u.meta.created,D=r-v;return this._ttl.age<D}).remove()},i))}_prepareFullDocIndex(){const t=new Array(this._data.length);for(let i=0;i<t.length;i++)t[i]=i;return t}ensureIndex(t,i,r){this.ensureRangedIndex(t,i,r)}ensureRangedIndex(t,i,r){if(i=i||"avl",r=r||"loki",!y.a[i])throw new Error("ensureRangedIndex: Unknown range index type");if(!N.a[r])throw new Error("ensureRangedIndex: Unknown comparator");let f=y.a[i],u=N.a[r];this._rangedIndexes[t]={index:f(t,u),indexTypeName:i,comparatorName:r};let v=this._rangedIndexes[t].index;for(let D=0;D<this._data.length;D++)v.insert(this._data[D].$loki,this._data[D][t])}ensureUniqueIndex(t){let i=new S(t);this._constraints.unique[t]=i;for(let r=0;r<this._data.length;r++)i.set(this._data[r].$loki,this._data[r][t]);return i}count(t){return t?this.chain().find(t)._filteredRows.length:this._data.length}_ensureId(){this._idIndex=[];for(let t=0;t<this._data.length;t++)this._idIndex.push(this._data[t].$loki)}addDynamicView(t,i){const r=new x(this,t,i);return this._dynamicViews.push(r),r}removeDynamicView(t){for(let i=0;i<this._dynamicViews.length;i++)this._dynamicViews[i].name===t&&this._dynamicViews.splice(i,1)}getDynamicView(t){for(let i=0;i<this._dynamicViews.length;i++)if(this._dynamicViews[i].name===t)return this._dynamicViews[i];return null}findAndUpdate(t,i){this.chain().find(t).update(i)}findAndRemove(t){this.chain().find(t).remove()}insert(t){if(!Array.isArray(t))return this.insertOne(t);let i,r=[];this.emit("pre-insert",t);for(let f=0;f<t.length;f++){if(i=this.insertOne(t[f],!0),!i)return;r.push(i)}return this.emit("insert",r),r=this._cloneObjects?g(r,this._cloneMethod):r,r.length===1?r[0]:r}insertOne(t,i=!1){let r=null,f;if(typeof t!="object"?r=new TypeError("Document needs to be an object"):t===null&&(r=new TypeError("Object cannot be null")),r!==null)throw this.emit("error",r),r;const u=this._defineNestedProperties(this._cloneObjects?g(t,this._cloneMethod):t);if(!this._disableMeta&&u.meta===void 0&&(u.meta={version:0,revision:0,created:0}),i||this.emit("pre-insert",u),!!this._add(u))return this._disableChangesApi?this._insertMeta(u):this._insertMetaWithChange(u),f=this._cloneObjects?g(u,this._cloneMethod):u,i||this.emit("insert",f),f}_defineNestedProperties(t){for(let i=0;i<this._nestedProperties.length;i++){const r=this._nestedProperties[i].name,f=this._nestedProperties[i].path;Object.defineProperty(t,r,{get(){const u=[];return X(this,f,u)?u:u[0]},set(u){f.slice(0,f.length-1).reduce((v,D)=>v&&v[D]?v[D]:null,this)[f[f.length-1]]=u},enumerable:!1,configurable:!0})}return t}clear({removeIndices:t=!1}={}){if(this._data=[],this._idIndex=[],this._cached=null,this._maxId=0,this._dynamicViews=[],this._dirty=!0,t===!0)this._rangedIndexes={},this._constraints={unique:{}};else{for(let r in this._rangedIndexes)this.ensureRangedIndex(r,this._rangedIndexes[r].indexTypeName,this._rangedIndexes[r].comparatorName);const i=Object.keys(this._constraints.unique);for(let r=0;r<i.length;r++)this._constraints.unique[i[r]].clear()}this._fullTextSearch!==null&&this._fullTextSearch.clear()}update(t){if(Array.isArray(t)){for(let i=0;i<t.length;i++)this.update(t[i]);return}if(t.$loki===void 0)throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();const i=this.get(t.$loki,!0);if(!i)throw new Error("Trying to update a document not in collection.");let r=i[0],f=i[1],u=this._defineNestedProperties(this._cloneObjects||!this._disableDeltaChangesApi?g(t,this._cloneMethod):t);this.emit("pre-update",t),Object.keys(this._constraints.unique).forEach(D=>{this._constraints.unique[D].update(u.$loki,u[D])}),this._data[f]=u,this._lokimap[t.$loki]=u;for(let D=0;D<this._dynamicViews.length;D++)this._dynamicViews[D]._evaluateDocument(f,!1);for(let D in this._rangedIndexes)this._rangedIndexes[D].index.update(t.$loki,t[D]);this._idIndex[f]=u.$loki,this._fullTextSearch!==null&&this._fullTextSearch.updateDocument(t,f),this.commit(),this._dirty=!0,this._disableChangesApi?this._updateMeta(u):this._updateMetaWithChange(u,r);let v=u;this._cloneObjects&&(v=g(u,this._cloneMethod)),this.emit("update",v,r)}catch(i){throw this.rollback(),this.emit("error",i),i}}_add(t){if(typeof t!="object")throw new TypeError("Object being added needs to be an object");if(t.$loki!==void 0)throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this._maxId++,isNaN(this._maxId)&&(this._maxId=this._data[this._data.length-1].$loki+1);const i=t;i.$loki=this._maxId,this._disableMeta||(i.meta.version=0);const r=this._constraints.unique;for(const v in r)r[v]!==void 0&&r[v].set(i.$loki,i[v]);this._idIndex.push(i.$loki),this._lokimap[i.$loki]=i,this._data.push(i);const f=this._data.length-1,u=this._dynamicViews.length;for(let v=0;v<u;v++)this._dynamicViews[v]._evaluateDocument(f,!0);for(let v in this._rangedIndexes)this._serializableIndexes&&i[v]instanceof Date&&(i[v]=i[v].getTime()),this._rangedIndexes[v].index.insert(t.$loki,t[v]);return this._fullTextSearch!==null&&this._fullTextSearch.addDocument(i,f),this.commit(),this._dirty=!0,this._cloneObjects?g(i,this._cloneMethod):i}catch(i){throw this.rollback(),this.emit("error",i),i}}updateWhere(t,i){const r=this.where(t);try{for(let f=0;f<r.length;f++)this.update(i(r[f]))}catch(f){throw this.rollback(),f}}removeWhere(t){this.remove(this._data.filter(t))}removeDataOnly(){this.remove(this._data.slice())}remove(t){if(typeof t=="number"&&(t=this.get(t)),Array.isArray(t)){let i=0;const r=t.length;for(i;i<r;i++)this.remove(t[i]);return}if(t.$loki===void 0)throw new Error("Object is not a document stored in the collection");try{this.startTransaction();const i=this.get(t.$loki,!0),r=i[1];let f=typeof t=="number"?this.get(t):t;Object.keys(this._constraints.unique).forEach(u=>{u in f&&this._constraints.unique[u].remove(f.$loki)});for(let u=0;u<this._dynamicViews.length;u++)this._dynamicViews[u]._removeDocument(r);this._data.splice(r,1),this._idIndex.splice(r,1),delete this._lokimap[t.$loki];for(let u in this._rangedIndexes)this._rangedIndexes[u].index.remove(t.$loki);this._fullTextSearch!==null&&this._fullTextSearch.removeDocument(t,r),this.commit(),this._dirty=!0,this._disableChangesApi||this._createChange(this.name,"R",i[0]),this.emit("delete",i[0]),delete t.$loki,delete t.meta}catch(i){throw this.rollback(),this.emit("error",i),i}}getChanges(){return this._changes}setChangesApi(t,i=!0){this._disableChangesApi=t,this._disableDeltaChangesApi=t?!0:i}flushChanges(){this._changes=[]}_getObjectDelta(t,i){const r=i!==null&&typeof i=="object"?Object.keys(i):null;if(r&&r.length&&["string","boolean","number"].indexOf(typeof i)<0){const f={};for(let u=0;u<r.length;u++){const v=r[u];if(i.hasOwnProperty(v))if(!t.hasOwnProperty(v)||this._constraints.unique[v]!==void 0||v==="$loki"||v==="meta")f[v]=i[v];else{const D=this._getObjectDelta(t[v],i[v]);D!==void 0&&D!=={}&&(f[v]=D)}}return Object.keys(f).length===0?void 0:f}else return t===i?void 0:i}_getChangeDelta(t,i){return i?this._getObjectDelta(i,t):JSON.parse(JSON.stringify(t))}_createChange(t,i,r,f){this._changes.push({name:t,operation:i,obj:i==="U"&&!this._disableDeltaChangesApi?this._getChangeDelta(r,f):JSON.parse(JSON.stringify(r))})}_createInsertChange(t){this._createChange(this.name,"I",t)}_createUpdateChange(t,i){this._createChange(this.name,"U",t,i)}_insertMetaWithChange(t){this._insertMeta(t),this._createInsertChange(t)}_updateMetaWithChange(t,i){this._updateMeta(t),this._createUpdateChange(t,i)}_insertMeta(t){this._disableMeta||(t.meta||(t.meta={version:0,revision:0,created:0}),t.meta.created=new Date().getTime(),t.meta.revision=0)}_updateMeta(t){this._disableMeta||(t.meta.updated=new Date().getTime(),t.meta.revision+=1)}get(t,i=!1){if(!i){let D=this._lokimap[t];return D===void 0?null:D}const r=this._idIndex;let f=r.length-1,u=0,v=u+f>>1;if(t=typeof t=="number"?t:parseInt(t,10),isNaN(t))throw new TypeError("Passed id is not an integer");for(;r[u]<r[f];)v=u+f>>1,r[v]<t?u=v+1:f=v;return f===u&&r[u]===t?i?[this._data[u],u]:this._data[u]:null}by(t,i){let r=this._constraints.unique[t].get(i);return this._cloneObjects?g(this._lokimap[r],this._cloneMethod):this._lokimap[r]}findOne(t){t=t||{};const i=this.chain().find(t,!0).data();return Array.isArray(i)&&i.length===0?null:this._cloneObjects?g(i[0],this._cloneMethod):i[0]}chain(t,i){const r=new d(this);return t===void 0?r:r.transform(t,i)}find(t){return this.chain().find(t).data()}findOneUnindexed(t,i){let r=this._data.length,f;for(;r--;)if(this._data[r][t]===i)return f=this._data[r],f;return null}startTransaction(){if(this._transactional){let t={};for(let i in this._rangedIndexes)t[i].indexTypeName=this._rangedIndexes[i].indexTypeName,t[i].comparatorName=this._rangedIndexes[i].comparatorName,t[i].index=this._rangedIndexes[i].index.backup();this._cached={index:this._idIndex,data:g(this._data,this._cloneMethod),rangedIndexes:t};for(let i=0;i<this._dynamicViews.length;i++)this._dynamicViews[i].startTransaction()}}commit(){if(this._transactional){this._cached=null;for(let t=0;t<this._dynamicViews.length;t++)this._dynamicViews[t].commit()}}rollback(){if(this._transactional&&this._cached!==null){this._idIndex=this._cached.index,this._data=this._cached.data;for(let t=0;t<this._data.length;t++)this._data[t]=this._defineNestedProperties(this._data[t]);for(let t in this._cached.rangedIndexes){let i=this._cached.rangedIndexes[t],r=y.a[i.indexTypeName],f=N.a[i.comparatorName],u=r(t,f);u.restore(i.index),this._rangedIndexes[t].index=u}for(let t=0;t<this._dynamicViews.length;t++)this._dynamicViews[t].rollback()}}where(t){return this.chain().where(t).data()}mapReduce(t,i){return i(this._data.map(t))}eqJoin(t,i,r,f,u){return new d(this).eqJoin(t,i,r,f,u)}getStage(t){return this._stages[t]||(this._stages[t]={}),this._stages[t]}stage(t,i){const r=JSON.parse(JSON.stringify(i));return this.getStage(t)[i.$loki]=r,r}commitStage(t,i){const r=this.getStage(t),f=new Date().getTime();for(const u in r)this.update(r[u]),this._commitLog.push({timestamp:f,message:i,data:JSON.parse(JSON.stringify(r[u]))});this._stages[t]={}}extract(t){const i=[];for(let r=0;r<this._data.length;r++)i.push(this._data[r][t]);return i}min(t){return Math.min.apply(null,this.extractNumerical(t))}max(t){return Math.max.apply(null,this.extractNumerical(t))}minRecord(t){const i={index:0,value:0};if(this._data.length===0)return i.index=null,i.value=null,i;i.index=this._data[0].$loki,i.value=parseFloat(this._data[0][t]);for(let r=1;r<this._data.length;r++){const f=parseFloat(this._data[r][t]);i.value>f&&(i.value=f,i.index=this._data[r].$loki)}return i}maxRecord(t){const i={index:0,value:0};if(this._data.length===0)return i.index=null,i.value=null,i;i.index=this._data[0].$loki,i.value=parseFloat(this._data[0][t]);for(let r=1;r<this._data.length;r++){const f=parseFloat(this._data[r][t]);i.value<f&&(i.value=f,i.index=this._data[r].$loki)}return i}extractNumerical(t){return this.extract(t).map(parseFloat).filter(Number).filter(i=>!isNaN(i))}avg(t){return K(this.extractNumerical(t))}stdDev(t){return $(this.extractNumerical(t))}mode(t){const i={},r=this.extractNumerical(t);let f=r[0],u=-1/0;for(let v=0;v<r.length;v++){const D=r[v];i[D]?i[D]++:i[D]=1,i[D]>u&&(f=D,u=i[D])}return f}median(t){const i=this.extractNumerical(t);i.sort((f,u)=>f-u);const r=Math.floor(i.length/2);return i.length%2?i[r]:(i[r-1]+i[r])/2}}},function(j,M,m){"use strict";class w{constructor(s,_){this.nodes={},this.apex=null,this.name=s,this.comparator=_}backup(){let s=new w(this.name,this.comparator);return s.nodes=JSON.parse(JSON.stringify(this.nodes)),s.apex=this.apex,s}restore(s){this.name=s.name,this.comparator=s.comparator,this.nodes=JSON.parse(JSON.stringify(s.nodes)),this.apex=s.apex}insert(s,_){if(s<=0)throw new Error("avl index ids are required to be numbers greater than zero");let g=this.nodes[s]={id:s,value:_,parent:null,balance:0,height:0,left:null,right:null,siblings:[]};if(!this.apex){this.apex=s;return}this.insertNode(this.nodes[this.apex],g)}insertNode(s,_){switch(this.comparator(_.value,s.value)){case 0:s.siblings.push(_.id),_.parent=s.id;break;case 1:s.right?(this.insertNode(this.nodes[s.right],_),this.updateBalance(s)):(s.right=_.id,_.parent=s.id,this.updateBalance(s));break;case-1:s.left?(this.insertNode(this.nodes[s.left],_),this.updateBalance(s)):(s.left=_.id,_.parent=s.id,this.updateBalance(s));break;default:throw new Error("Invalid comparator result")}if(s.balance<-1){if(s.left===null)throw new Error("insertNode.balance() : left child should not be null");this.nodes[s.left].balance<=0?this.leftLeftCase(s):this.leftRightCase(s)}if(s.balance>1){if(s.right===null)throw new Error("insertNode.balance() : right child should not be null");this.nodes[s.right].balance>=0?this.rightRightCase(s):this.rightLeftCase(s)}return s.height}updateBalance(s){let _=s.left?this.nodes[s.left].height:-1,g=s.right?this.nodes[s.right].height:-1;s.height=_>g?1+_:1+g,s.balance=g-_}leftLeftCase(s){return this.rotateRight(s)}leftRightCase(s){if(!s.left)throw new Error("leftRightCase: left child not set");return s.left=this.rotateLeft(this.nodes[s.left]).id,this.rotateRight(s)}rightRightCase(s){return this.rotateLeft(s)}rightLeftCase(s){if(!s.right)throw new Error("rightLeftCase: right child not set");return s.right=this.rotateRight(this.nodes[s.right]).id,this.rotateLeft(s)}rotateLeft(s){if(!s.right)throw new Error("rotateLeft: right child was unavailable.");let _=s.parent?this.nodes[s.parent]:null,g=this.nodes[s.right];if(s.right=g.left,s.right&&(this.nodes[s.right].parent=s.id),g.left=s.id,g.parent=s.parent,s.parent=g.id,_)if(_.left===s.id)_.left=g.id;else if(_.right===s.id)_.right=g.id;else throw new Error("rotateLeft() : attempt to remap parent back to child failed... not found");else{if(this.apex!==s.id)throw new Error("rightRotate expecting parentless node to be apex");this.apex=g.id}return this.updateBalance(s),this.updateBalance(g),g}rotateRight(s){if(!s.left)throw new Error("rotateRight : left child unavailable");let _=s.parent?this.nodes[s.parent]:null,g=this.nodes[s.left];if(s.left=g.right,g.right&&(this.nodes[g.right].parent=s.id),g.right=s.id,g.parent=s.parent,s.parent=g.id,_)_.left===s.id?_.left=g.id:_.right=g.id;else{if(this.apex!==s.id)throw new Error("rightRotate expecting parentless node to be apex");this.apex=g.id}return this.updateBalance(s),this.updateBalance(g),g}getValuesAsTree(s){return this.apex===null?null:(s=s||this.nodes[this.apex],{id:s.id,val:s.value,siblings:s.siblings,balance:s.balance,height:s.height,left:s.left?this.getValuesAsTree(this.nodes[s.left]):null,right:s.right?this.getValuesAsTree(this.nodes[s.right]):null})}update(s,_){let g=this.nodes[s];this.comparator(g.value,_)!==0&&(this.remove(s),this.insert(s,_))}remove(s){if(!this.apex)throw new Error("remove() : attempting remove when tree has no apex");this.removeNode(this.nodes[this.apex],s)}removeNode(s,_){if(!this.nodes[_])throw new Error("removeNode: attempting to remove a node which is not in hashmap");let g=this.nodes[_].value;switch(this.comparator(g,s.value)){case 0:if(s.siblings.length>0)if(s.id===_){let O=s.siblings.shift(),N=this.nodes[O];N.parent=s.parent,this.updateChildLink(s.parent,_,O),s.left&&(this.nodes[s.left].parent=O),s.right&&(this.nodes[s.right].parent=O),N.left=s.left,N.right=s.right,N.siblings=s.siblings,N.height=s.height,N.balance=s.balance,this.apex===_&&(this.apex=O);for(let I of N.siblings)this.nodes[I].parent=O;delete this.nodes[_];return}else{let O=s.siblings.indexOf(_);if(O===-1)throw new Error("Unable to remove sibling from parented sibling");s.siblings.splice(O,1),delete this.nodes[_];return}else{if(!s.left&&!s.right){this.updateChildLink(s.parent,s.id,null),delete this.nodes[_],_===this.apex&&(this.apex=null);return}if(!s.left||!s.right){s.left&&(this.promoteChild(s,this.nodes[s.left]),this.apex===_&&(this.apex=s.left)),s.right&&(this.promoteChild(s,this.nodes[s.right]),this.apex===_&&(this.apex=s.right));return}this.promoteSuccessor(s);return}case 1:if(!s.right)throw new Error("removeNode: Unable to find value in tree");this.removeNode(this.nodes[s.right],_);break;case-1:if(!s.left)throw new Error("removeNode: Unable to find value in tree");this.removeNode(this.nodes[s.left],_);break}if(this.updateBalance(s),s.balance<-1){if(s.left===null)throw new Error("insertNode.balance() : left child should not be null");this.nodes[s.left].balance<=0?this.leftLeftCase(s):this.leftRightCase(s)}if(s.balance>1){if(s.right===null)throw new Error("insertNode.balance() : right child should not be null");this.nodes[s.right].balance>=0?this.rightRightCase(s):this.rightLeftCase(s)}}updateChildLink(s,_,g){if(s===null)return;let O=this.nodes[s];O.left===_?O.left=g:O.right===_&&(O.right=g)}promoteChild(s,_){let g=s.parent;if(g){let O=this.nodes[g];O.left===s.id?O.left=_.id:O.right===s.id&&(O.right=_.id)}_.parent=g,delete this.nodes[s.id]}promoteSuccessor(s){let _=s.id;if(!s.right||!s.left)throw new Error("promoteSuccessor() : node to replace does not have two children");let g=null,O,N,I;if(s.balance<0){let h=this.nodes[s.left];g=this.findGreaterLeaf(h),O=g.id,N=g.value,I=g.siblings,g.siblings=[],this.removeNode(h,O)}else{let h=this.nodes[s.right];g=this.findLesserLeaf(h),O=g.id,N=g.value,I=g.siblings,g.siblings=[],this.removeNode(h,O)}if(s.parent){let h=this.nodes[s.parent];h.left===_&&(h.left=O),h.right===_&&(h.right=O)}s.left&&(this.nodes[s.left].parent=O),s.right&&(this.nodes[s.right].parent=O),s.id=O,s.value=N,s.siblings=I,this.nodes[O]=s,delete this.nodes[_],this.apex===_&&(this.apex=O),this.updateBalance(s)}findGreaterLeaf(s){if(!s.right)return s;let _=this.findGreaterLeaf(this.nodes[s.right]);return _||s}findLesserLeaf(s){if(!s.left)return s;let _=this.findLesserLeaf(this.nodes[s.left]);return _||s}rangeRequest(s){if(!this.apex)return[];if(!s)return this.collateIds(this.nodes[this.apex]);if(s.op==="$eq"){let g=this.locate(this.nodes[this.apex],s.val);return g===null?[]:g.siblings.length?[g.id,...g.siblings]:[g.id]}return this.collateRequest(this.nodes[this.apex],s)}collateRequest(s,_){let g=[];if(_.op==="$eq")throw new Error("collateRequest does not support $eq range request");let O=this.comparator(s.value,_.val),N=0;if(_.op==="$between"){if(_.high===null||_.high===void 0)throw new Error("collateRequest: $between request missing high range value");N=this.comparator(s.value,_.high)}if(s.left)switch(_.op){case"$lt":case"$lte":g=this.collateRequest(this.nodes[s.left],_);break;case"$gt":case"$gte":O===1&&(g=this.collateRequest(this.nodes[s.left],_));break;case"$between":O===1&&(g=this.collateRequest(this.nodes[s.left],_));break;default:break}if(!_)g.push(s.id),g.push(...s.siblings);else switch(_.op){case"$lt":O===-1&&(g.push(s.id),g.push(...s.siblings));break;case"$lte":(O===-1||O===0)&&(g.push(s.id),g.push(...s.siblings));break;case"$gt":O===1&&(g.push(s.id),g.push(...s.siblings));break;case"$gte":(O===1||O===0)&&(g.push(s.id),g.push(...s.siblings));break;case"$between":O>=0&&N<=0&&(g.push(s.id),g.push(...s.siblings));break;default:break}if(s.right)if(!_)g.push(...this.collateRequest(this.nodes[s.right],_));else switch(_.op){case"$lt":case"$lte":O===-1&&g.push(...this.collateRequest(this.nodes[s.right],_));break;case"$gt":case"$gte":g.push(...this.collateRequest(this.nodes[s.right],_));break;case"$between":N===-1&&g.push(...this.collateRequest(this.nodes[s.right],_));break;default:break}return g}collateIds(s){let _=[];return s?(s.left&&(_=this.collateIds(this.nodes[s.left])),_.push(s.id),_.push(...s.siblings),s.right&&_.push(...this.collateIds(this.nodes[s.right])),_):[]}locate(s,_){for(;s!==null;)switch(this.comparator(_,s.value)){case 0:return s;case 1:if(!s.right)return null;s=this.nodes[s.right];break;case-1:if(!s.left)return null;s=this.nodes[s.left];break}return null}validateIndex(){if(!this.apex)return Object.keys(this.nodes).length===0;if(this.nodes[this.apex].parent!==null)return!1;let s=this.collateIds(this.nodes[this.apex]),_=Object.keys(this.nodes).length;if(s.length!==_)return!1;if(s.length===1)return!(this.nodes[s[0]].parent!==null||this.nodes[s[0]].left!==null||this.nodes[s[0]].right!==null);for(let g=0;g<s.length-1;g++)if(this.comparator(this.nodes[s[g]].value,this.nodes[s[g+1]].value)===1)return!1;return this.validateNode(this.nodes[this.apex])}validateNode(s){if([s.parent,s.left,s.right].indexOf(s.id)!==-1)return!1;let _=s.left?this.nodes[s.left].height:-1,g=s.right?this.nodes[s.right].height:-1,O=1+Math.max(_,g);if(s.height!==O||s.balance!==g-_)return!1;if(s.siblings.length>0){for(let N of s.siblings)if(this.nodes[N].parent!==s.id)return!1}return!(s.left&&(this.nodes[s.left].parent!==s.id||!this.validateNode(this.nodes[s.left]))||s.right&&(this.nodes[s.right].parent!==s.id||!this.validateNode(this.nodes[s.right])))}}m.d(M,"a",function(){return S});let S={avl:(P,s)=>new w(P,s)}},function(j,M,m){"use strict";m.d(M,"a",function(){return w});class w{constructor(){this._events={},this._asyncListeners=!1}on(P,s){let _;return Array.isArray(P)?(P.forEach(g=>{this.on(g,s)}),s):(_=this._events[P],_||(_=this._events[P]=[]),_.push(s),s)}emit(P,...s){P&&this._events[P]&&this._events[P].forEach(_=>{this._asyncListeners?setTimeout(()=>{_(...s)},1):_(...s)})}addListener(P,s){return this.on(P,s)}removeListener(P,s){if(Array.isArray(P)&&P.forEach(_=>{this.removeListener(_,s)}),this._events[P]){const _=this._events[P];_.splice(_.indexOf(s),1)}}}},function(j,M,m){"use strict";(function(w){m.d(M,"a",function(){return I});var S=m(5),P=m(3),s=m(1),_=m(0),g=m(4),O=m(2);function N(){if(w!==void 0&&(w.android||w.NSObject))return"NATIVESCRIPT";if(w!==void 0&&{}.toString.call(w.process)==="[object process]")return w.window,"NODEJS";if(document!==void 0)return document.URL.indexOf("http://")===-1&&document.URL.indexOf("https://")===-1?"CORDOVA":"BROWSER";if(window!==void 0&&{}.toString.call(window)==="[object Window]")return"BROWSER";throw SyntaxError("Unknown environment...")}class I extends S.a{constructor(n="loki.db",d={}){super();if(this.databaseVersion=1.5,this.engineVersion=1.5,this._persistenceMethod=null,this._persistenceAdapter=null,this._throttledSaves=!0,this._throttledSaveRunning=null,this._throttledSavePending=null,this._autosave=!1,this._autosaveInterval=5e3,this._autosaveRunning=!1,this._autosaveHandler=Promise.resolve(),this.filename=n,this._collections=[],{serializationMethod:this._serializationMethod="normal",destructureDelimiter:this._destructureDelimiter=`$<
`,env:this._env=N()}=d,this._events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]},d.comparatorMap)for(let x in d.comparatorMap)_.a[x]=d.comparatorMap[x];if(d.rangedIndexFactoryMap)for(let x in d.rangedIndexFactoryMap)g.a[x]=d.rangedIndexFactoryMap[x];if(d.lokiOperatorPackageMap)for(let x in d.lokiOperatorPackageMap)O.a[x]=d.lokiOperatorPackageMap[x];this.on("init",this.clearChanges)}initializePersistence(n={}){let d=this._autosaveDisable();({autosave:this._autosave=!1,autosaveInterval:this._autosaveInterval=5e3,persistenceMethod:this._persistenceMethod,throttledSaves:this._throttledSaves=!0}=n);const x={NODEJS:["fs-storage"],BROWSER:["local-storage","indexed-storage"],CORDOVA:["local-storage","indexed-storage"],MEMORY:["memory-storage"]},y={"fs-storage":s.a.FSStorage,"local-storage":s.a.LocalStorage,"indexed-storage":s.a.IndexedStorage,"memory-storage":s.a.MemoryStorage};if(this._persistenceMethod!==void 0)if(typeof y[this._persistenceMethod]=="function")this._persistenceAdapter=new y[this._persistenceMethod];else throw Error("Unknown persistence method.");if(n.adapter!==void 0&&(this._persistenceMethod="adapter",this._persistenceAdapter=n.adapter),this._persistenceAdapter===null){let e=x[this._env];if(e){for(let K=0;K<e.length;K++)if(y[e[K]]){this._persistenceMethod=e[K],this._persistenceAdapter=new y[e[K]];break}}}return n.autoload&&(d=d.then(()=>this._loadDatabase(n.inflate,!0))),d.then(()=>{this._autosaveEnable()})}copy(n={}){const d=new I(this.filename,{env:this._env});if(d.loadJSONObject(this,{retainDirtyFlags:!0}),n.removeNonSerializable){d._persistenceAdapter=null;for(let x=0;x<d._collections.length;x++)d._collections[x]._constraints=null,d._collections[x]._ttl=null}return d}addCollection(n,d={}){for(let y=0;y<this._collections.length;y++)if(this._collections[y].name===n)return this._collections[y];const x=new P.a(n,d);return this._collections.push(x),x}loadCollection(n){if(!n.name)throw new Error("Collection must have a name property to be loaded");this._collections.push(n)}getCollection(n){for(let d=0;d<this._collections.length;d++)if(this._collections[d].name===n)return this._collections[d];return this.emit("warning","collection "+n+" not found"),null}renameCollection(n,d){const x=this.getCollection(n);return x&&(x.name=d),x}listCollections(){const n=[];for(let d=0;d<this._collections.length;d++)n.push({name:this._collections[d].name,count:this._collections[d].count()});return n}removeCollection(n){for(let d=0;d<this._collections.length;d++)if(this._collections[d].name===n){const x=new P.a(n,{}),y=this._collections[d];for(const e in y)y[e]!==void 0&&x[e]!==void 0&&(y[e]=x[e]);this._collections.splice(d,1);return}}serialize(n={}){switch(n.serializationMethod===void 0&&(n.serializationMethod=this._serializationMethod),n.serializationMethod){case"normal":return JSON.stringify(this);case"pretty":return JSON.stringify(this,null,2);case"destructured":return this.serializeDestructured();default:return JSON.stringify(this)}}toJSON(){return{_env:this._env,_serializationMethod:this._serializationMethod,_autosave:this._autosave,_autosaveInterval:this._autosaveInterval,_collections:this._collections,databaseVersion:this.databaseVersion,engineVersion:this.engineVersion,filename:this.filename,_persistenceAdapter:this._persistenceAdapter,_persistenceMethod:this._persistenceMethod,_throttledSaves:this._throttledSaves}}serializeDestructured(n={}){if(n.partitioned===void 0&&(n.partitioned=!1),n.delimited===void 0&&(n.delimited=!0),n.delimiter===void 0&&(n.delimiter=this._destructureDelimiter),n.partitioned===!0&&n.partition!==void 0&&n.partition>=0)return this.serializeCollection({delimited:n.delimited,delimiter:n.delimiter,collectionIndex:n.partition});let d=new I(this.filename);d.loadJSONObject(this);for(let y=0;y<d._collections.length;y++)d._collections[y]._data=[];if(n.partitioned===!0&&n.partition===-1)return d.serialize({serializationMethod:"normal"});const x=[];x.push(d.serialize({serializationMethod:"normal"})),d=null;for(let y=0;y<this._collections.length;y++){let e=this.serializeCollection({delimited:n.delimited,delimiter:n.delimiter,collectionIndex:y});if(n.partitioned===!1&&n.delimited===!1){if(!Array.isArray(e))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(let K=0;K<e.length;K++)x.push(e[K]),e[K]=null;x.push("")}else x.push(e)}return n.partitioned?(n.delimited,x):n.delimited?(x.push(""),x.join(n.delimiter)):(x.push(""),x)}serializeCollection(n={}){if(n.delimited===void 0&&(n.delimited=!0),n.collectionIndex===void 0)throw new Error("serializeCollection called without 'collectionIndex' option");const d=this._collections[n.collectionIndex].count();let x=[];for(let y=0;y<d;y++)x.push(JSON.stringify(this._collections[n.collectionIndex]._data[y]));return n.delimited?(x.push(""),x.join(n.delimiter)):x}deserializeDestructured(n,d={}){if(d.partitioned===void 0&&(d.partitioned=!1),d.delimited===void 0&&(d.delimited=!0),d.delimiter===void 0&&(d.delimiter=this._destructureDelimiter),d.partitioned){if(d.partition!==void 0)return d.partition===-1?JSON.parse(n[0]):this.deserializeCollection(n[d.partition+1],d);const Y=JSON.parse(n[0]),k=Y._collections.length;for(let t=0;t<k;t++)Y._collections[t]._data=this.deserializeCollection(n[t+1],d);return Y}let x=[];if(d.delimited){if(x=n.split(d.delimiter),n=null,x.length===0)return null}else x=n;const y=JSON.parse(x[0]),e=y._collections.length;x[0]=null;let K=0,$=1,X=!1;for(;!X;)x[$]===""?++K>e&&(X=!0):y._collections[K]._data.push(JSON.parse(x[$])),x[$++]=null;return y}deserializeCollection(n,d={}){d.partitioned===void 0&&(d.partitioned=!1),d.delimited===void 0&&(d.delimited=!0),d.delimiter===void 0&&(d.delimiter=this._destructureDelimiter);let x=[];d.delimited?(x=n.split(d.delimiter),x.pop()):x=n;for(let y=0;y<x.length;y++)x[y]=JSON.parse(x[y]);return x}loadJSON(n,d){let x;if(n.length===0)x={};else switch(this._serializationMethod){case"normal":case"pretty":x=JSON.parse(n);break;case"destructured":x=this.deserializeDestructured(n);break;default:x=JSON.parse(n);break}this.loadJSONObject(x,d)}loadJSONObject(n,d={}){const x=n._collections?n._collections.length:0;this.filename=n.filename,this._collections=[];for(let y=0;y<x;++y)this._collections.push(P.a.fromJSONObject(n._collections[y],d))}close(){return this._autosave?this._autosaveDisable().then(()=>this._autosaveDirty()?this.saveDatabase():Promise.resolve()):Promise.resolve().then(()=>{this.emit("close")})}generateChangesNotification(n){let d=[];const x=n||this._collections.map(y=>y.name);return this._collections.forEach(y=>{x.indexOf(y.name)!==-1&&(d=d.concat(y.getChanges()))}),d}serializeChanges(n){return JSON.stringify(this.generateChangesNotification(n))}clearChanges(){this._collections.forEach(n=>{n.flushChanges&&n.flushChanges()})}throttledSaveDrain(n={}){const d=new Date().getTime();return this._throttledSaves?(n.recursiveWait===void 0&&(n.recursiveWait=!0),n.recursiveWaitLimit===void 0&&(n.recursiveWaitLimit=!1),n.recursiveWaitLimitDuration===void 0&&(n.recursiveWaitLimitDuration=2e3),n.started===void 0&&(n.started=new Date),this._throttledSaves&&this._throttledSaveRunning!==null?n.recursiveWait?Promise.resolve(Promise.all([this._throttledSaveRunning,this._throttledSavePending])).then(()=>this._throttledSaveRunning!==null||this._throttledSavePending!==null?n.recursiveWaitLimit&&d-n.started.getTime()>n.recursiveWaitLimitDuration?Promise.reject({}):this.throttledSaveDrain(n):Promise.resolve()):Promise.resolve(this._throttledSaveRunning):Promise.resolve()):Promise.resolve()}_loadDatabase(n={},d=!1){return this._persistenceAdapter===null?Promise.reject(new Error("persistenceAdapter not configured")):Promise.resolve(this._persistenceAdapter.loadDatabase(this.filename)).then(x=>{if(typeof x=="string")this.loadJSON(x,n),this.emit("load",this);else if(typeof x=="object"&&x!==null&&!(x instanceof Error))this.loadJSONObject(x,n),this.emit("load",this);else throw x}).catch(x=>{if(x instanceof Error)throw x;if(x!=null)throw new TypeError("The persistence adapter did not load a serialized DB string or object.");if(!d)throw new Error("Database not found.")})}loadDatabase(n={}){return this._throttledSaves?this.throttledSaveDrain(n).then(()=>(this._throttledSaveRunning=this._loadDatabase(n).then(()=>{this._throttledSaveRunning=null}),this._throttledSaveRunning),()=>{throw new Error("Unable to pause save throttling long enough to read database")}):this._loadDatabase(n)}_saveDatabase(){return this._persistenceAdapter===null?Promise.reject(new Error("persistenceAdapter not configured")):this._persistenceAdapter.mode==="reference"&&typeof this._persistenceAdapter.exportDatabase=="function"?Promise.resolve(this._persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}))).then(()=>{this._autosaveClearFlags(),this.emit("save")}):(this._autosaveClearFlags(),Promise.resolve(this._persistenceAdapter.saveDatabase(this.filename,this.serialize())).then(()=>{this.emit("save")}))}saveDatabase(){return this._throttledSaves?(this._throttledSaveRunning!==null&&this._throttledSavePending===null&&(this._throttledSavePending=Promise.resolve(this._throttledSaveRunning).then(()=>(this._throttledSaveRunning=null,this._throttledSavePending=null,this.saveDatabase()))),this._throttledSavePending!==null?this._throttledSavePending:(this._throttledSaveRunning=this._saveDatabase().then(()=>{this._throttledSaveRunning=null}),this._throttledSaveRunning)):this._saveDatabase()}deleteDatabase(){return this._persistenceAdapter===null?Promise.reject(new Error("persistenceAdapter not configured")):Promise.resolve(this._persistenceAdapter.deleteDatabase(this.filename))}_autosaveDirty(){for(let n=0;n<this._collections.length;n++)if(this._collections[n]._dirty)return!0;return!1}_autosaveClearFlags(){for(let n=0;n<this._collections.length;n++)this._collections[n]._dirty=!1}_autosaveEnable(){if(!this._autosave||this._autosaveRunning)return;this._autosaveRunning=!0;const n=setInterval(()=>{this._autosaveRunning?this._autosaveDirty()&&(this._autosaveHandler=this._autosaveHandler.then(()=>this.saveDatabase())):clearInterval(n)},this._autosaveInterval)}_autosaveDisable(){return this._autosaveRunning=!1,this._autosaveHandler}}}).call(this,m(7))},function(j,M){var m;m=function(){return this}();try{m=m||Function("return this")()||(0,eval)("this")}catch(w){typeof window=="object"&&(m=window)}j.exports=m},function(j,M,m){"use strict";m.r(M);var w=m(6);m.d(M,"Loki",function(){return w.a});var S=m(3);m.d(M,"Collection",function(){return S.a}),w.a.Collection=S.a,M.default=w.a}])})},439:function(L,q,C){(function(M,m){L.exports=m()})(typeof self!="undefined"?self:this,function(){return function(j){var M={};function m(w){if(M[w])return M[w].exports;var S=M[w]={i:w,l:!1,exports:{}};return j[w].call(S.exports,S,S.exports,m),S.l=!0,S.exports}return m.m=j,m.c=M,m.d=function(w,S,P){m.o(w,S)||Object.defineProperty(w,S,{enumerable:!0,get:P})},m.r=function(w){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})},m.t=function(w,S){if(S&1&&(w=m(w)),S&8||S&4&&typeof w=="object"&&w&&w.__esModule)return w;var P=Object.create(null);if(m.r(P),Object.defineProperty(P,"default",{enumerable:!0,value:w}),S&2&&typeof w!="string")for(var s in w)m.d(P,s,function(_){return w[_]}.bind(null,s));return P},m.n=function(w){var S=w&&w.__esModule?function(){return w.default}:function(){return w};return m.d(S,"a",S),S},m.o=function(w,S){return Object.prototype.hasOwnProperty.call(w,S)},m.p="",m(m.s=1)}([function(j,M,m){"use strict";(function(w){m.d(M,"a",function(){return s});function S(){let _;return function(g){_=g}(w!==void 0&&w||this),_}function P(){const _=S(),g=Symbol.for("LOKI");return _[g]===void 0&&(_[g]={}),_[g]}const s=P()}).call(this,m(2))},function(j,M,m){"use strict";m.r(M);function w(E){return E.split(/[\s]+/)}function S(E){return E.toLowerCase()}function P(E){return E.toUpperCase()}function s(E,l){if(E.char_filter)for(let a=0;a<E.char_filter.length;a++)l=E.char_filter[a](l);const o=E.tokenizer(l);if(E.token_filter)for(let a=0;a<o.length;a++)for(let c=0;c<E.token_filter.length;c++)o[a]=E.token_filter[c](o[a],a,o);return o.filter(a=>a)}class _{constructor(){this.tokenizer=w,this.token_filter=[S]}}function g(E){const l=[];for(let o=0;o<E.length;){const a=E.charCodeAt(o++);if(a>=55296&&a<=56319){const c=E.charCodeAt(o++);l.push(65536+(a-55296<<10)|c-56320)}else l.push(a)}return l}class O{constructor(l={}){this.docCount=0,this.docStore=new Map,this.totalFieldLength=0,this.root=new Map,{store:this._store=!0,optimizeChanges:this._optimizeChanges=!0,analyzer:this.analyzer=new _}=l}insert(l,o){if(this.docStore.has(o))throw Error("Field already added.");const a=s(this.analyzer,l);if(a.length==0){this.docStore.set(o,{fieldLength:0});return}this.totalFieldLength+=a.length,this.docCount+=1,this.docStore.set(o,{fieldLength:a.length});const c=[];this._optimizeChanges&&Object.defineProperties(this.docStore.get(o),{indexRef:{enumerable:!1,configurable:!0,writable:!0,value:c}});for(const p of new Set(a)){let b=0;for(let A=0;A<a.length;A++)a[A]===p&&++b;let z=this.root;for(const A of g(p)){let R=z.get(A);R===void 0&&(R=new Map,this._optimizeChanges&&(R.pa=z),z.set(A,R)),z=R}z.dc===void 0&&(z.dc=new Map,z.df=0),z.dc.set(o,b),z.df+=1,c.push(z)}}remove(l){if(!this.docStore.has(l))return;const o=this.docStore.get(l);if(this.docStore.delete(l),o.fieldLength!==0)if(this.docCount-=1,this.totalFieldLength-=o.fieldLength,this._optimizeChanges){const a=o.indexRef;for(let c=0;c<a.length;c++){let p=a[c];if(p.df-=1,p.dc.delete(l),p.df===0){if(delete p.df,delete p.dc,p.size!==0)continue;do{const b=p.pa;delete p.pa;for(const z of b.keys())if(b.get(z)===p){b.delete(z);break}p=b}while(p.pa!==void 0&&p.size===0&&p.df===void 0)}}}else this._remove(this.root,l)}static getTermIndex(l,o,a=0){if(a>=l.length)return null;for(let c=a;c<l.length;c++){let p=o.get(l[c]);if(p===void 0)return null;o=p}return o}static extendTermIndex(l,o=[],a=[]){l.df!==void 0&&a.push({index:l,term:o.slice()}),o.push(0);for(const c of l)o[o.length-1]=c[0],O.extendTermIndex(c[1],o,a);return o.pop(),a}toJSON(){return this._store?{_store:!0,_optimizeChanges:this._optimizeChanges,docCount:this.docCount,docStore:[...this.docStore],totalFieldLength:this.totalFieldLength,root:O._serializeIndex(this.root)}:{_store:!1,_optimizeChanges:this._optimizeChanges}}static fromJSONObject(l,o){const a=new O({store:l._store,optimizeChanges:l._optimizeChanges,analyzer:o});return l._store&&(a.docCount=l.docCount,a.docStore=new Map(l.docStore),a.totalFieldLength=l.totalFieldLength,a.root=O._deserializeIndex(l.root)),a._optimizeChanges&&a._regenerate(a.root,null),a}static _serializeIndex(l){const o={};if(l.dc!==void 0&&(o.d={df:l.df,dc:[...l.dc]}),l.size===0)return o;const a=[],c=[];for(const p of l)a.push(p[0]),c.push(O._serializeIndex(p[1]));return o.k=a,o.v=c,o}static _deserializeIndex(l){const o=new Map;if(l.k!==void 0)for(let a=0;a<l.k.length;a++)o.set(l.k[a],O._deserializeIndex(l.v[a]));return l.d!==void 0&&(o.df=l.d.df,o.dc=new Map(l.d.dc)),o}_regenerate(l,o){o!==null&&(l.pa=o);for(const a of l.values())this._regenerate(a,l);if(l.dc!==void 0)for(const a of l.dc.keys()){const c=this.docStore.get(a);c.indexRef===void 0&&Object.defineProperties(c,{indexRef:{enumerable:!1,configurable:!0,writable:!0,value:[]}}),c.indexRef.push(l)}}_remove(l,o){for(const a of l)this._remove(a[1],o)&&l.delete(a[0]);return l.df!==void 0&&l.dc.has(o)&&(l.df-=1,l.dc.delete(o),l.df===0&&(delete l.df,delete l.dc)),l.size===0&&l.dc===void 0}}class N{constructor(l){this._cache={},this._invIdxs=l}setDirty(){this._cache={}}score(l,o,a,c,p,b,z=0){if(a===null||a.dc===void 0)return;const A=this._idf(l,z||a.df);for(const[R,T]of a.dc)p.has(R)||p.set(R,[]),c===!0?p.get(R).push({tf:T,idf:A,boost:o,fieldName:l,term:b}):c===!1?p.set(R,[{boost:o}]):p.set(R,[{boost:0}])}scoreConstant(l,o,a){return a.has(o)||a.set(o,[]),a.get(o).push({boost:l}),a}finalScore(l,o){const a={},c=l.bm25!==void 0?l.bm25.k1:1.2,p=l.bm25!==void 0?l.bm25.b:.75,b=l.explain!==void 0?l.explain:!1;for(const[z,A]of o){let R=0,T=[];for(let Q=0;Q<A.length;Q++){const W=A[Q];let oe=0;if(W.tf!==void 0){const ae=W.tf,G=N._calculateFieldLength(this._invIdxs[W.fieldName].docStore.get(z).fieldLength),ee=this._avgFieldLength(W.fieldName),se=ae*(c+1)/(ae+c*(1-p+p*(G/ee)));oe=W.idf*se*W.boost,b&&T.push({boost:W.boost,score:oe,docID:z,fieldName:W.fieldName,index:String.fromCharCode(...W.term),idf:W.idf,tfNorm:se,tf:ae,fieldLength:G,avgFieldLength:ee})}else oe=W.boost,b&&T.push({boost:W.boost,score:oe});R+=oe}b?a[z]={score:R,explanation:T}:a[z]={score:R}}return a}static _calculateFieldLength(l){return l}_getCache(l){if(this._cache[l]===void 0){const o=this._invIdxs[l].totalFieldLength/this._invIdxs[l].docCount;this._cache[l]={idfs:{},avgFieldLength:o}}return this._cache[l]}_idf(l,o){const a=this._getCache(l);return a.idfs[o]!==void 0?a.idfs[o]:a.idfs[o]=Math.log(1+(this._invIdxs[l].docCount-o+.5)/(o+.5))}_avgFieldLength(l){return this._getCache(l).avgFieldLength}}class I{constructor(l){const o=l.getNumStates();this._points=l.getStartPoints(),this._accept=new Array(o),this._transitions=new Array(o*this._points.length);for(let a=0;a<o;a++){this._accept[a]=l.isAccept(a);for(let c=0;c<this._points.length;c++)this._transitions[a*this._points.length+c]=l.step(a,this._points[c])}this._classmap=new Array(256);for(let a=0,c=0;c<this._classmap.length;c++)a+1<this._points.length&&c===this._points[a+1]&&a++,this._classmap[c]=a}getCharClass(l){let o=0,a=this._points.length;for(;a-o>1;){const c=o+a>>>1;if(this._points[c]>l)a=c;else if(this._points[c]<l)o=c;else return c}return o}step(l,o){return o>=this._classmap.length?this._transitions[l*this._points.length+this.getCharClass(o)]:this._transitions[l*this._points.length+this._classmap[o]]}isAccept(l){return this._accept[l]}}const h=0,n=1114111;function d(E,l){return E[0]<l[0]?-1:E[0]>l[0]?1:E[1]<l[1]?-1:E[1]>l[1]?1:E[2]<l[2]?-1:E[2]>l[2]?1:0}function x(E,l){return E[1]<l[1]?-1:E[1]>l[1]?1:E[2]<l[2]?-1:E[2]>l[2]?1:E[0]<l[0]?-1:E[0]>l[0]?1:0}class y{constructor(){this._stateTransitions=[],this._stateTransitions=[],this._accept=new Set,this._nextState=0,this._currState=-1,this._transitions={}}isAccept(l){return this._accept.has(l)}createState(){return this._nextState++}setAccept(l,o){o?this._accept.add(l):this._accept.delete(l)}finishState(){this._currState!==-1&&(this._finishCurrentState(),this._currState=-1)}_finishCurrentState(){this._stateTransitions.sort(d);let l=0,o=[-1,-1,-1];for(let a=0,c=this._stateTransitions.length;a<c;a++){let p=this._stateTransitions[a];o[0]===p[0]?p[1]<=o[2]+1?p[2]>o[2]&&(o[2]=p[2]):(o[0]!==-1&&(this._stateTransitions[l][0]=o[0],this._stateTransitions[l][1]=o[1],this._stateTransitions[l][2]=o[2],l++),o[1]=p[1],o[2]=p[2]):(o[0]!==-1&&(this._stateTransitions[l][0]=o[0],this._stateTransitions[l][1]=o[1],this._stateTransitions[l][2]=o[2],l++),o[0]=p[0],o[1]=p[1],o[2]=p[2])}o[0]!==-1&&(this._stateTransitions[l][0]=o[0],this._stateTransitions[l][1]=o[1],this._stateTransitions[l][2]=o[2],l++),this._transitions[this._currState]=this._stateTransitions.slice(0,l).sort(x),this._stateTransitions=[]}getStartPoints(){const l=new Set;l.add(h);const o=Object.keys(this._transitions);for(let a=0;a<o.length;a++){let c=this._transitions[o[a]];for(let p=0;p<c.length;p++){let b=c[p];l.add(b[1]),b[2]<n&&l.add(b[2]+1)}}return Array.from(l).sort((a,c)=>a-c)}step(l,o){let a=this._transitions[l];if(a)for(let c=0;c<a.length;c++){let p=a[c];if(p[1]<=o&&o<=p[2])return p[0]}return-1}getNumStates(){return this._nextState}addTransition(l,o,a,c){this._currState!==l&&(this._currState!==-1&&this._finishCurrentState(),this._currState=l),this._stateTransitions.push([o,a,c])}}class e{constructor(l=0,o=0){this._low=l,this._high=o}shiftRight(l){return(l&=63)===0?this:l<32?new e(this._low>>>l|this._high<<32-l,this._high>>l):new e(this._high>>l-32,this._high>=0?0:-1)}shiftLeft(l){return(l&=63)===0?this:l<32?new e(this._low<<l,this._high<<l|this._low>>>32-l):new e(0,this._low<<l-32)}and(l){return new e(this._low&l._low,this._high&l._high)}toInt(){return this._low}}const K=[new e(1),new e(3),new e(7),new e(15),new e(31),new e(63),new e(127),new e(255),new e(511),new e(1023),new e(2047),new e(4095),new e(8191),new e(16383),new e(32767),new e(65535),new e(15,8191),new e(15,16383),new e(15,32767),new e(15,65535),new e(255,8191),new e(255,16383),new e(255,32767),new e(255,65535),new e(4095,8191),new e(4095,16383),new e(4095,32767),new e(4095,65535),new e(65535,8191),new e(65535,16383),new e(65535,32767),new e(65535,65535),new e(1048575,8191),new e(1048575,16383),new e(1048575,32767),new e(1048575,65535),new e(16777215,8191),new e(16777215,16383),new e(16777215,32767),new e(16777215,65535),new e(268435455,8191),new e(268435455,16383),new e(268435455,32767),new e(268435455,65535),new e(4294967295,8191),new e(4294967295,16383),new e(4294967295,32767),new e(4294967295,65535),new e(68719476735,8191),new e(68719476735,16383),new e(68719476735,32767),new e(68719476735,65535),new e(1099511627775,8191),new e(1099511627775,16383),new e(1099511627775,32767),new e(1099511627775,65535),new e(17592186044415,8191),new e(17592186044415,16383),new e(17592186044415,32767),new e(17592186044415,65535),new e(281474976710655,8191),new e(281474976710655,16383),new e(281474976710655,32767)];class ${constructor(l,o,a){this._w=l,this._n=o,this._minErrors=a}size(){return this._minErrors.length*(this._w+1)}isAccept(l){let o=Math.floor(l/(this._w+1)),a=l%(this._w+1);return this._w-a+this._minErrors[o]<=this._n}getPosition(l){return l%(this._w+1)}static unpack(l,o,a){const c=a*o,p=c>>6,b=c&63;if(b+a<=64)return l[p].shiftRight(b).and(K[a-1]).toInt();{const z=64-b;return l[p].shiftRight(b).and(K[z-1]).toInt()+l[1+p].and(K[a-z-1]).shiftLeft(z).toInt()}}}const X=[new e(2)],Y=[new e(0)],k=[new e(2627)],t=[new e(56)],i=[new e(2182348803,877873428),new e(109)],r=[new e(1436680192,21845)],f=[new e(2416705539,559024212),new e(1161073005,1531779490),new e(55860)],u=[new e(553385984,1431678474),new e(1431655765)];class v extends ${constructor(l){super(l,1,[0,1,0,-1,-1,-1])}transition(l,o,a){let c=Math.floor(l/(this._w+1)),p=l%(this._w+1);if(o===this._w){if(c<2){const b=a*2+c;p+=$.unpack(Y,b,1),c=$.unpack(X,b,2)-1}}else if(o===this._w-1){if(c<3){const b=a*3+c;p+=$.unpack(t,b,1),c=$.unpack(k,b,2)-1}}else if(o===this._w-2){if(c<6){const b=a*6+c;p+=$.unpack(r,b,2),c=$.unpack(i,b,3)-1}}else if(c<6){const b=a*6+c;p+=$.unpack(u,b,2),c=$.unpack(f,b,3)-1}return c===-1?-1:c*(this._w+1)+p}}const D=[new e(35)],F=[new e(0)],V=[new e(325618500)],H=[new e(992)],ne=[new e(1375778052,1625010352),new e(654713383,1379082614),new e(338833973,592794674),new e(17236)],Z=[new e(8192,1431339176),new e(1431655765,85)],B=[new e(1074107396,3875651625),new e(10813440,2685408800),new e(2705416840,2955709504),new e(822630592,176295986),new e(220770817,826549144),new e(2222426336,1384244520),new e(146941966,2721677523),new e(2841782156,506631345),new e(579396904,2353082526),new e(35310113,289686537),new e(2259748971,295985736),new e(492978372,711088276),new e(1217426605,1344578827),new e(1376534810,344070858),new e(190401092,1485354377),new e(3289490533,2484954400),new e(2909430484,2337837173),new e(441472420)],J=[new e(8192,3195650),new e(3288085308,704655603),new e(2189600800,591003698),new e(850559912,1431655765),new e(1431655765,1431655765),new e(1431655765,1431655765),new e(1431655765,1431655765)],U=[new e(2904068,58725456),new e(3640,3305111883),new e(1363153922,1300),new e(0),new e(335609856,85458955),new e(685900336,166838792),new e(2198499522,564071920),new e(136348160,2181038210),new e(1619003392,134546689),new e(39855683,813828486),new e(1347453028,1164181826),new e(536873009,139461908),new e(2231378050,1094735904),new e(160481793,1164017816),new e(1352667217,137456908),new e(84799712,558175264),new e(340820500,219423040),new e(1350704224,1008844824),new e(3407093895,30086147),new e(407994924,2148016453),new e(545259552,2097672),new e(2266497861,3490060320),new e(613903113,3406463435),new e(1648822737,145860110),new e(2183434377,38340640),new e(13811748,3272876486),new e(356860963,1009861909),new e(3256660288,830815266),new e(740327956,1158959115),new e(1351286865,141656116),new e(1359540421,2999666001),new e(481339408,3894702429),new e(2425032288,337824532),new e(3224154437,813771810),new e(212943372,2216698370),new e(550373456,1545653768),new e(2332913858,545392672),new e(337723912,1107841154),new e(1350765600,153125696),new e(325399954,3323153862),new e(1841617741,3540595740),new e(1423134004,1680136456),new e(50861250,2449943586),new e(614664496,1109422667),new e(633938146,611374880),new e(2539425922,2462657904),new e(76697096,3406332098),new e(3259769985,1165203240),new e(3663819994,3336195509),new e(1563465501,1264399831),new e(2474794210,271614300),new e(34386245,1363419217),new e(740429356,3308790030),new e(1389038960,139543060),new e(2232701250,541788240),new e(1079067660,2450874499),new e(2785961365,1298533965),new e(476956248,2497254628),new e(341103461,2187601497),new e(1359153171,680658732),new e(3408700171,3804373106),new e(542345488,1160540375),new e(1888368785,145935149),new e(3255087694,2177569856),new e(683854372,3661947790),new e(2245419236,499571301),new e(2388496718,3804978483),new e(949191224)],fe=[new e(524288,805437440),new e(2146400),new e(67108864,2169044992),new e(276973604,1076138561),new e(1610621058,3680514243),new e(807079296,1815527532),new e(897243,2954387888),new e(2441666669,460338720),new e(114847159,134255104),new e(37758096,76680228),new e(136613897,4784130),new e(672286724,1225265793),new e(306857122,880804100),new e(220463628,3272159376),new e(616713508,1073781257),new e(2449540634,77089286),new e(1898353250,1229784210),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,9362)],le=[new e(2904068,58725456),new e(3640,3305111883),new e(1363153922,1300),new e(0),new e(335609856,85196811),new e(59637984,5570560),new e(100708736,642062416),new e(136348168,2181570690),new e(1082263584,181504),new e(2156659014,1887570488),new e(2620424828,3279691970),new e(545261671,2130440),new e(33562752,2973765664),new e(5341184,2190352419),new e(547298336,137406220),new e(2235429087,1363481680),new e(340820500,370417986),new e(813715536,1613103716),new e(1124606104,621086726),new e(341196820,1107296387),new e(545587281,139461128),new e(336856450,2157513760),new e(136714249,2181140994),new e(2416314689,143787289),new e(3257709122,575218834),new e(23218476,1124599045),new e(2248302630,2151761173),new e(3316920642,935559200),new e(340819988,1107841157),new e(1350893649,21053528),new e(2550763714,1363501440),new e(206610448,3758633325),new e(1351295472,743623468),new e(3257709129,1611476114),new e(407929372,2268864960),new e(63640608,738315028),new e(1159221634,545261601),new e(136347648,1157636098),new e(545724419,141559316),new e(84419023,1946484981),new e(408981504,2471335494),new e(813845808,1277481805),new e(3321943618,25561121),new e(635093620,3265295049),new e(2445440114,745112472),new e(2300846658,2453800992),new e(883951872,2181591424),new e(2963079265,481446262),new e(2635903144,1625695344),new e(359976510,3541325271),new e(633494900,476056888),new e(1111241026,1364284500),new e(335790868,3257672139),new e(558045267,11715080),new e(85217605,54855856),new e(206604056,1427443855),new e(4060419156,141821184),new e(102297744,3797110162),new e(1704116792,1228416601),new e(566624470,1143194388),new e(3408729413,1925357634),new e(2693907828,1110194563),new e(1351298130,11715860),new e(2150936715,4039444593),new e(1162957064,2819666635),new e(1901927600,576776228),new e(2385343694,3864603731),new e(949191224,1108095105),new e(570559665,139494432),new e(3456639182,1891785760),new e(136350477,1107828866),new e(1350702113,203440648),new e(2200719491,554174592),new e(137937428,2768779394),new e(2848166960,2863311530),new e(2678717098,447381162),new e(337691400,2185765072),new e(2228833636,1904530289),new e(460404435,885148935),new e(355783501,2567517762),new e(818021680,137626888),new e(1398349970,886858038),new e(1303698529,2759444188),new e(1227133514,2450169746),new e(2173872170,1925324848),new e(814942496,119845450),new e(2450400290,225575516),new e(3372753479,2463566197),new e(618694956,2282496073),new e(3259505840,747801636),new e(2299037513,2158306440),new e(2865185684,1787173674),new e(2871505528,135998630),new e(120332803,2735288466),new e(1763036764,3614016979),new e(1998285110,1567933020),new e(2301457623,1917716851),new e(142656005,1277460939),new e(1939286210,1635048005),new e(3662525914,1252095430),new e(2252890502,1787206439),new e(813795018,212944144),new e(1142968578,571354193),new e(941690412,3406655685),new e(1363285074,340869640),new e(1258836101,1363414048),new e(339772204,3407106312),new e(1217071240,2486264328),new e(2675866051,4205477370),new e(2124930941,50862570),new e(550507601,1701086552),new e(2473165721,2517850499),new e(956767089,3647288901),new e(2521109812,81828105),new e(85213378,559286324),new e(1625708889,3596674266),new e(3336332676,2449992057),new e(3750905888,2821358087),new e(271614374,2300605125),new e(2999595186,740427564),new e(87593230,1388776818),new e(149129492,2334962391),new e(541795552,481379340),new e(2351735368,2269850802),new e(608733960,1133805922),new e(2602532471,2658691750),new e(3970345447,1359153177),new e(680658732,2386076427),new e(2207475987,1771444057),new e(1161328411,1959672182),new e(149130029,3255099982),new e(2177569856,683854372),new e(3661947790,2245419236),new e(1975966309,1770391529),new e(2582087242,2798283430)],ce=[new e(524288,805437440),new e(2146400),new e(67108864,16777216),new e(1348481048,3681400539),new e(11702,2759852034),new e(1092883008,306782344),new e(1065248,1073742080),new e(2450071634,613598240),new e(157651673,204527616),new e(3277862616,2954562566),new e(1815534349,409731075),new e(2954587142,2911241057),new e(1533925085,905970103),new e(230032140,3289526556),new e(3068358150,56077),new e(3674310171,152604166),new e(1907829602,7198427),new e(8390944,1076101705),new e(2420711618,545409280),new e(1074040832,302064768),new e(2760925472,1428467018),new e(38273045,1083326496),new e(1212191753,2454856978),new e(603981856,1226838017),new e(541721760,689080612),new e(349513,2416455890),new e(616710196,154440460),new e(40379539,68708608),new e(1629493832,2588509714),new e(894585300,204767233),new e(2483889154,616827184),new e(153412173,440402074),new e(110231814,1644468298),new e(2456888978,2454277460),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756,1227133513),new e(2454267026,613566756),new e(1227133513,2454267026),new e(613566756)];class ue extends ${constructor(l){super(l,2,[0,2,1,0,1,0,-1,0,0,-1,0,-1,-1,-1,-1,-1,-2,-1,-1,-1,-2,-1,-1,-2,-1,-1,-2,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2])}transition(l,o,a){let c=Math.floor(l/(this._w+1)),p=l%(this._w+1);if(o===this._w){if(c<3){const b=a*3+c;p+=$.unpack(F,b,1),c=$.unpack(D,b,2)-1}}else if(o===this._w-1){if(c<5){const b=a*5+c;p+=$.unpack(H,b,1),c=$.unpack(V,b,3)-1}}else if(o===this._w-2){if(c<13){const b=a*13+c;p+=$.unpack(Z,b,2),c=$.unpack(ne,b,4)-1}}else if(o===this._w-3){if(c<28){const b=a*28+c;p+=$.unpack(J,b,2),c=$.unpack(B,b,5)-1}}else if(o===this._w-4){if(c<45){const b=a*45+c;p+=$.unpack(fe,b,3),c=$.unpack(U,b,6)-1}}else if(c<45){const b=a*45+c;p+=$.unpack(ce,b,3),c=$.unpack(le,b,6)-1}return c===-1?-1:c*(this._w+1)+p}}class de{constructor(l,o){this._word=l,this._editDistance=o,this._alphabet=[...new Set(this._word)].sort((c,p)=>c-p),this._numRanges=0,this._rangeLower=new Array(this._alphabet.length+2),this._rangeUpper=new Array(this._alphabet.length+2);let a=0;for(let c=0;c<this._alphabet.length;c++){const p=this._alphabet[c];p>a&&(this._rangeLower[this._numRanges]=a,this._rangeUpper[this._numRanges]=p-1,this._numRanges++),a=p+1}a<=n&&(this._rangeLower[this._numRanges]=a,this._rangeUpper[this._numRanges]=n,this._numRanges++),o===1?this._description=new v(l.length):this._description=new ue(l.length)}toAutomaton(){let l=new y;const o=2*this._editDistance+1,a=this._description.size();l.createState();for(let c=1;c<a;c++){let p=l.createState();l.setAccept(p,this._description.isAccept(c))}for(let c=0;c<a;c++){const p=this._description.getPosition(c);if(p<0)continue;const b=p+Math.min(this._word.length-p,o);for(let A=0;A<this._alphabet.length;A++){const R=this._alphabet[A],T=this._getVector(R,p,b),Q=this._description.transition(c,p,T);Q>=0&&l.addTransition(c,Q,R,R)}const z=this._description.transition(c,p,0);if(z>=0)for(let A=0;A<this._numRanges;A++)l.addTransition(c,z,this._rangeLower[A],this._rangeUpper[A])}return l.finishState(),l}_getVector(l,o,a){let c=0;for(let p=o;p<a;p++)c<<=1,this._word[p]===l&&(c|=1);return c}}function re(E,l){if(l===void 0)return 1;if(typeof l=="number")return l<0?E+l:l;let o=E;if(l.includes("<")){for(const a of l.split(" ")){const c=a.split("<"),p=parseInt(c[0]);if(E<=p)return o;o=re(E,c[1])}return o}if(l.includes("%")){const a=parseInt(l.slice(0,-1)),c=o*a*(1/100);o=c<0?o+Math.ceil(c):Math.floor(c)}else{const a=parseInt(l);o=a<0?o+a:a}return o<1?1:o}class _e{constructor(l,o){this._invIdxs=l,this._docs=o,this._scorer=new N(this._invIdxs)}search(l){let o=this._recursive(l.query,!0);if(l.calculate_scoring===void 0||l.calculate_scoring)return this._scorer.finalScore(l,o);const a={};for(const c of o.keys())a[c]={score:1};return a}setDirty(){this._scorer.setDirty()}_recursive(l,o){let a=new Map;const c=l.boost!==void 0?l.boost:1,p=l.field!==void 0?l.field:null;let b=null,z=null;switch(this._invIdxs[p]!==void 0&&(b=this._invIdxs[p].root,z=this._invIdxs[p].analyzer),l.type){case"bool":{if(a=null,l.must!==void 0&&(a=this._getUnique(l.must,o,a)),l.filter!==void 0&&(a=this._getUnique(l.filter,null,a)),l.should!==void 0){const A=this._getAll(l.should,o);let R=!1;a===null&&(R=!0,a=new Map);const T=Math.max(1,re(l.should.length,l.minimum_should_match));if(R&&T===1)a=A;else for(const[Q,W]of A)W.length>=T&&(a.has(Q)?a.get(Q).push(...W):R?a.set(Q,W):a.delete(Q))}if(a===null&&(a=this._recursive({type:"match_all"},!1)),l.not!==void 0){let A=this._getAll(l.not,null);for(const R of A.keys())a.has(R)&&a.delete(R)}if(c!==1)for(const[A,R]of a)for(let T=0;T<R.length;T++)R[T].boost*=c;break}case"term":{const A=g(l.value);let R=O.getTermIndex(A,b);this._scorer.score(p,c,R,o,a,A);break}case"terms":{for(let A=0;A<l.value.length;A++){const R=g(l.value[A]);let T=O.getTermIndex(R,b);this._scorer.score(p,c,T,o,a,R)}break}case"fuzzy":{const[A,R]=ge(l,b);for(let T=0;T<A.length;T++)this._scorer.score(p,c*A[T].boost,A[T].index,o,a,A[T].term,R);break}case"wildcard":{const A=l.enable_scoring!==void 0?l.enable_scoring:!1,R=pe(l,b);for(let T=0;T<R.length;T++)this._scorer.score(p,c,R[T].index,o&&A,a,R[T].term);break}case"match_all":{for(let A of this._docs)this._scorer.scoreConstant(c,A,a);break}case"constant_score":{let A=this._getAll(l.filter,!1);for(const R of A.keys())this._scorer.scoreConstant(c,R,a);break}case"prefix":{const A=l.enable_scoring!==void 0?l.enable_scoring:!1,R=g(l.value),T=O.getTermIndex(R,b);if(T!==null){const Q=O.extendTermIndex(T);for(let W=0;W<Q.length;W++)this._scorer.score(p,c,Q[W].index,o&&A,a,[...R,...Q[W].term])}break}case"exists":{if(b!==null)for(const A of this._invIdxs[p].docStore.keys())this._scorer.scoreConstant(c,A,a);break}case"match":{const A=s(z,l.value),R=l.operator!==void 0?l.operator:"or",T={type:"bool"},Q=[];if(R==="or"?(l.minimum_should_match!==void 0&&(T.minimum_should_match=l.minimum_should_match),T.should=Q):T.must=Q,T.boost=c,l.fuzziness!==void 0){let W=l.prefix_length!==void 0?l.prefix_length:2,oe=l.extended!==void 0?l.extended:!1;for(let ae=0;ae<A.length;ae++)Q.push({type:"fuzzy",field:p,value:A[ae],fuzziness:l.fuzziness,prefix_length:W,extended:oe})}else for(let W=0;W<A.length;W++)Q.push({type:"term",field:p,value:A[W]});a=this._recursive(T,o);break}default:break}return a}_getUnique(l,o,a){if(l.length===0)return a;for(let c=0;c<l.length;c++){let p=this._recursive(l[c],o);if(a===null){a=this._recursive(l[0],o);continue}for(const b of a.keys())p.has(b)?a.get(b).push(...p.get(b)):a.delete(b)}return a}_getAll(l,o,a=new Map){for(let c=0;c<l.length;c++){let p=this._recursive(l[c],o);for(const b of p.keys())a.has(b)?a.get(b).push(...p.get(b)):a.set(b,p.get(b))}return a}}function xe(E,l){let o,a,c,p;const b=Array(E.length+1);for(o=0;o<=E.length;o++)b[o]=o;for(o=1;o<=l.length;o++){for(c=o,a=1;a<=E.length;a++)l[o-1]===E[a-1]?p=b[a-1]:(p=Math.min(b[a-1]+1,Math.min(c+1,b[a]+1)),o>1&&a>1&&l[o-2]===E[a-1]&&E[a-2]===l[o-1]&&(p=Math.min(p,b[a-1]-(E[a-1]===l[o-1]?1:0)))),b[a-1]=c,c=p;b[E.length]=c}return b[E.length]}function ge(E,l){let o=g(E.value),a=E.fuzziness!==void 0?E.fuzziness:"AUTO";a==="AUTO"&&(o.length<=2?a=0:o.length<=5?a=1:a=2);let c=E.prefix_length!==void 0?E.prefix_length:0,p=E.extended!==void 0?E.extended:!1;a===0&&(c=o.length);let b=[],z=l,A=o.slice(0,c),R=o,T=0;if(c!==0&&(z=O.getTermIndex(A,z),R=R.slice(c)),z===null)return[b,T];if(R.length===0){if(p){const G=O.extendTermIndex(z);for(let ee=0;ee<G.length;ee++)b.push({index:G[ee].index,term:G[ee].term,boost:1}),T=Math.max(T,G[ee].index.df)}else z.dc!==void 0&&(b.push({index:z,term:o,boost:1}),T=z.df);return[b,T]}const Q=[0],W=new I(new de(R,a).toAutomaton());function oe(G,ee,se){let te=0;if(G=W.step(G,0),G!==-1&&W.isAccept(G)&&(te++,G=W.step(G,0),G!==-1&&W.isAccept(G)&&te++,ee.length<se.length)){if(te!==a)return xe(ee,se);te-=se.length-ee.length}return a-te}function ae(G,ee,se){if(Q[Q.length-1]=ee,G=W.step(G,ee),G!==-1){if(W.isAccept(G)){if(p){const te=O.extendTermIndex(se);for(let he=0;he<te.length;he++)b.push({index:te[he].index,term:te[he].term,boost:1}),T=Math.max(T,te[he].index.df);return}else if(se.df!==void 0){const te=oe(G,Q,R),he=Math.max(0,1-te/Math.min(A.length+Q.length,o.length));b.push({index:se,term:[...A,...Q],boost:he}),T=Math.max(T,se.df)}}Q.push(0);for(const te of se)ae(G,te[0],te[1]);Q.pop()}}for(const G of z)ae(0,G[0],G[1]);return[b,T]}function pe(E,l){let o=g(E.value),a=[];function c(p,b=0,z=[],A=!1){if(p!==null){if(b===o.length){p.df!==void 0&&a.push({index:p,term:z.slice()});return}if(!A&&o[b]===92)c(p,b+1,z,!0);else if(!A&&o[b]===63)for(const R of p)c(R[1],b+1,[...z,R[0]]);else if(!A&&o[b]===42)if(b+1===o.length){const R=O.extendTermIndex(p);for(let T=0;T<R.length;T++)c(R[T].index,b+1,[...z,...R[T].term])}else{c(p,b+1,z,!1);const R=[{index:p,term:[]}];do{const T=R.pop();for(const Q of T.index)c(Q[1],b+1,[...z,...T.term,Q[0]]),R.push({index:Q[1],term:[...T.term,Q[0]]})}while(R.length!==0)}else c(O.getTermIndex([o[b]],p),b+1,[...z,o[b]])}}return c(l),a}var we=m(0);class ie{constructor(l=[],o){this._invIdxs={};for(let a=0;a<l.length;a++){let c=l[a];this._invIdxs[c.field]=new O(c)}this._id=o,this._docs=new Set,this._idxSearcher=new _e(this._invIdxs,this._docs)}static register(){we.a.FullTextSearch=ie}addDocument(l,o=l[this._id]){let a=Object.keys(this._invIdxs);for(let c=0,p;c<a.length,p=a[c];c++){let b=l[p];if(b!=null){if(typeof b!="string")if(typeof b=="number")b=b.toString();else throw TypeError("Unsupported field type for full text search.");this._invIdxs[p].insert(b,o)}}this._docs.add(o),this._idxSearcher.setDirty()}removeDocument(l,o=l[this._id]){let a=Object.keys(this._invIdxs);for(let c=0;c<a.length;c++)this._invIdxs[a[c]].remove(o);this._docs.delete(o),this._idxSearcher.setDirty()}updateDocument(l,o=l[this._id]){this.removeDocument(l,o),this.addDocument(l,o)}clear(){for(let l of this._docs)this.removeDocument(null,l)}search(l){return this._idxSearcher.search(l)}toJSON(){let l={id:this._id,ii:{}},o=Object.keys(this._invIdxs);for(let a=0;a<o.length;a++){const c=o[a];l.ii[c]=this._invIdxs[c].toJSON()}return l}static fromJSONObject(l,o={}){let a=new ie([],l.id),c=Object.keys(l.ii);for(let p=0;p<c.length;p++){const b=c[p];a._invIdxs[b]=O.fromJSONObject(l.ii[b],o[b])}return a}}m.d(M,"FullTextSearch",function(){return ie}),m.d(M,"analyze",function(){return s}),m.d(M,"StandardAnalyzer",function(){return _}),m.d(M,"whitespaceTokenizer",function(){return w}),m.d(M,"lowercaseTokenFilter",function(){return S}),m.d(M,"uppercaseTokenFilter",function(){return P}),ie.Analyzer={},ie.Analyzer.analyze=s,ie.Analyzer.StandardAnalyzer=_,ie.Tokenizer={},ie.Tokenizer.whitespaceTokenizer=w,ie.TokenFilter={},ie.TokenFilter.lowercaseTokenFilter=S,ie.TokenFilter.uppercaseTokenFilter=P;var me=M.default=ie},function(j,M){var m;m=function(){return this}();try{m=m||Function("return this")()||(0,eval)("this")}catch(w){typeof window=="object"&&(m=window)}j.exports=m}])})},446:function(L,q,C){"use strict";C.r(q);var j=C(13),M=C(10),m=C.n(M),w=C(19),S=C.n(w),P=C(51),s=C.n(P),_=C(32),g=C.n(_),O=C(36),N=C.n(O),I=C(70),h=C.n(I),n=C(73),d=C.n(n),x=C(147),y=C.n(x),e=C(210),K=C.n(e),$=C(40),X=C.n($),Y=C(432),k=C.n(Y),t=C(438),i=C.n(t),r=C(439),f=C.n(r);f.a.register();var u=["/","/works"],v,D,F=function(){var H={},ne=[];Array.from(arguments).forEach(function(re){typeof re=="string"?ne.push(re):Object(j.a)(re)==="object"&&(H=re)});var Z=H,B=Z.text,J=B===void 0?!1:B,U=Z.deep,fe=U===void 0?!1:U,le="/".concat(ne.join("/").replace(/\/+/g,"/")),ce=!le||!!u.find(function(re){return re===le}),ue=ce?{dir:fe?{$regex:new RegExp("^".concat(le))}:le}:{path:le},de=ce?[]:[function(re){return re[0]}];return new k.a({query:D.chain().find(ue,!ce),path:le,postprocess:de,text:J},{fullTextSearchFields:["title","description","slug","text"]})};q.default=function(V){return v=new i.a("content.db"),v.loadJSONObject(V),D=v.getCollection("items"),F}}}]);
